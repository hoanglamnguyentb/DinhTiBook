{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_a_input = _resolveComponent(\"a-input\");\n  const _component_a_form_item = _resolveComponent(\"a-form-item\");\n  const _component_a_input_number = _resolveComponent(\"a-input-number\");\n  const _component_a_textarea = _resolveComponent(\"a-textarea\");\n  const _component_a_form = _resolveComponent(\"a-form\");\n  const _component_a_modal = _resolveComponent(\"a-modal\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_createVNode(_component_a_modal, {\n    open: $data.open,\n    \"onUpdate:open\": _cache[4] || (_cache[4] = $event => $data.open = $event),\n    title: $data.id ? 'Cập nhật danh mục' : 'Thêm danh mục',\n    onOk: $options.handleOk,\n    onCancel: $options.closeModal,\n    \"confirm-loading\": $data.isLoading\n  }, {\n    default: _withCtx(() => [_createVNode(_component_a_form, {\n      ref: \"formRef\",\n      model: $data.danhMuc,\n      rules: $data.rules,\n      layout: \"vertical\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_a_form_item, {\n        ref: \"ten\",\n        label: \"Tên danh mục\",\n        name: \"tenDanhMuc\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_input, {\n          value: $data.danhMuc.tenDanhMuc,\n          \"onUpdate:value\": _cache[0] || (_cache[0] = $event => $data.danhMuc.tenDanhMuc = $event)\n        }, null, 8 /* PROPS */, [\"value\"])]),\n        _: 1 /* STABLE */\n      }, 512 /* NEED_PATCH */), _createVNode(_component_a_form_item, {\n        ref: \"thutu\",\n        label: \"Thứ tự hiển thị\",\n        name: \"thuTuHienThi\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_input_number, {\n          value: $data.danhMuc.thuTuHienThi,\n          \"onUpdate:value\": _cache[1] || (_cache[1] = $event => $data.danhMuc.thuTuHienThi = $event)\n        }, null, 8 /* PROPS */, [\"value\"])]),\n        _: 1 /* STABLE */\n      }, 512 /* NEED_PATCH */), _createVNode(_component_a_form_item, {\n        ref: \"ma\",\n        label: \"Mã danh mục\",\n        name: \"maDM\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_input, {\n          value: $data.danhMuc.maDM,\n          \"onUpdate:value\": _cache[2] || (_cache[2] = $event => $data.danhMuc.maDM = $event)\n        }, null, 8 /* PROPS */, [\"value\"])]),\n        _: 1 /* STABLE */\n      }, 512 /* NEED_PATCH */), _createVNode(_component_a_form_item, {\n        ref: \"ghiChu\",\n        label: \"Ghi chú\",\n        name: \"ghiChu\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_textarea, {\n          value: $data.danhMuc.ghiChu,\n          \"onUpdate:value\": _cache[3] || (_cache[3] = $event => $data.danhMuc.ghiChu = $event)\n        }, null, 8 /* PROPS */, [\"value\"])]),\n        _: 1 /* STABLE */\n      }, 512 /* NEED_PATCH */)]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"model\", \"rules\"])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"open\", \"title\", \"onOk\", \"onCancel\", \"confirm-loading\"])]);\n}","map":{"version":3,"names":["_createElementBlock","_createVNode","_component_a_modal","open","$data","$event","title","id","onOk","$options","handleOk","onCancel","closeModal","isLoading","_component_a_form","ref","model","danhMuc","rules","layout","_component_a_form_item","label","name","_component_a_input","value","tenDanhMuc","_component_a_input_number","thuTuHienThi","maDM","_component_a_textarea","ghiChu"],"sources":["D:\\HINET_1\\BacKan\\client\\src\\views\\dashboard\\QL_DanhMuc\\ModalAddEditDanhMuc.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <a-modal v-model:open=\"open\" :title=\"id ? 'Cập nhật danh mục' : 'Thêm danh mục'\" @ok=\"handleOk\" @cancel=\"closeModal\"\r\n      :confirm-loading=\"isLoading\">\r\n      <a-form ref=\"formRef\" :model=\"danhMuc\" :rules=\"rules\" layout=\"vertical\">\r\n        <a-form-item ref=\"ten\" label=\"Tên danh mục\" name=\"tenDanhMuc\">\r\n          <a-input v-model:value=\"danhMuc.tenDanhMuc\" />\r\n        </a-form-item>\r\n        <a-form-item ref=\"thutu\" label=\"Thứ tự hiển thị\" name=\"thuTuHienThi\">\r\n          <a-input-number v-model:value=\"danhMuc.thuTuHienThi\" />\r\n        </a-form-item>\r\n        <a-form-item ref=\"ma\" label=\"Mã danh mục\" name=\"maDM\">\r\n          <a-input v-model:value=\"danhMuc.maDM\" />\r\n        </a-form-item>\r\n\r\n        <a-form-item ref=\"ghiChu\" label=\"Ghi chú\" name=\"ghiChu\">\r\n          <a-textarea v-model:value=\"danhMuc.ghiChu\" />\r\n        </a-form-item>\r\n      </a-form>\r\n    </a-modal>\r\n  </div>\r\n</template>\r\n<script>\r\nimport APIService from \"@/helpers/ApiService\"\r\n\r\nexport default {\r\n\r\n  data() {\r\n    return {\r\n      isLoading: false,\r\n      open: false,\r\n      labelCol: {\r\n        span: 6,\r\n      },\r\n      wrapperCol: {\r\n        span: 14,\r\n      },\r\n      id: undefined,\r\n      danhMuc: {\r\n        tenDanhMuc: '',\r\n        thuTuHienThi: '',\r\n        maDM: '',\r\n        ghiChu: '',\r\n        tepDinhKem: '',\r\n      },\r\n      rules: {\r\n        tenDanhMuc: [\r\n          {\r\n            required: true,\r\n            message: 'Tên danh mục là bắt buộc',\r\n            trigger: 'change',\r\n          },\r\n          {\r\n            min: 1,\r\n            max: 20,\r\n            message: 'Độ dài từ 1-20',\r\n            trigger: 'blur',\r\n          },\r\n        ],\r\n        maDM: [\r\n          {\r\n            required: true,\r\n            message: 'Mã danh mục là bắt buộc',\r\n            trigger: 'change',\r\n          },\r\n          {\r\n            min: 1,\r\n            max: 20,\r\n            message: 'Độ dài từ 3-20',\r\n            trigger: 'blur',\r\n          },\r\n        ],\r\n        thuTuHienThi: [\r\n\r\n          {\r\n            type: 'integer',\r\n            message: 'Thứ tự hiển thị phải là một số nguyên',\r\n            trigger: 'blur',\r\n          }\r\n        ],\r\n        ghiChu: [\r\n          { required: false }\r\n        ]\r\n\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    async showModal(id) {\r\n      this.open = true\r\n      if (id) {\r\n        var res = await APIService.get(`/DanhMuc/${id}`)\r\n        this.id = id\r\n        this.danhMuc = res.data.data\r\n      }\r\n    },\r\n    closeModal() {\r\n      this.open = false\r\n      this.id = undefined\r\n      this.resetForm()\r\n    },\r\n    handleOk() {\r\n      this.$refs.formRef.validate().then(async () => {\r\n\r\n        var duplicateCategory = false\r\n        var duplicateOrder = false\r\n        if (this.id) {\r\n          this.isLoading = true;\r\n          var response = await APIService.put(`/DanhMuc/edit/${this.id}`, this.danhMuc)\r\n\r\n          duplicateCategory = response.data.message == \"Mã bị trùng\" ? true : false;\r\n          duplicateOrder = response.data.message == \"Thứ tự hiển thị bị trùng\" ? true : false;\r\n\r\n\r\n        } else {\r\n          this.isLoading = true;\r\n          var response = await APIService.post(\"/DanhMuc/create\", this.danhMuc)\r\n          duplicateCategory = response.data.message == \"Mã bị trùng\" ? true : false;\r\n          duplicateOrder = response.data.message == \"Thứ tự hiển thị bị trùng\" ? true : false;\r\n\r\n\r\n        }\r\n        if (duplicateCategory == false && duplicateOrder == false) {\r\n          \r\n          this.closeModal()\r\n          this.$message.success(\"Thành công\")  \r\n          this.$emit('addSuccess')\r\n         \r\n        } else if (duplicateCategory) {\r\n          this.isLoading = false\r\n          this.$message.error(\"Trùng mã danh mục\")\r\n        } else {\r\n          this.isLoading = false\r\n          this.$message.error(\"Trùng thứ tự hiển thị\")\r\n        }\r\n\r\n\r\n\r\n      }).catch(error => {\r\n        console.log('error', error);\r\n      }).finally(() => {\r\n        this.isLoading = false;\r\n      })\r\n    },\r\n    resetForm() {\r\n      this.$refs.formRef.resetFields();\r\n    },\r\n  }\r\n}\r\n\r\n</script>"],"mappings":";;;;;;;;uBACEA,mBAAA,CAmBM,cAlBJC,YAAA,CAiBUC,kBAAA;IAjBOC,IAAI,EAAEC,KAAA,CAAAD,IAAI;yDAAJC,KAAA,CAAAD,IAAI,GAAAE,MAAA;IAAGC,KAAK,EAAEF,KAAA,CAAAG,EAAE;IAA2CC,IAAE,EAAEC,QAAA,CAAAC,QAAQ;IAAGC,QAAM,EAAEF,QAAA,CAAAG,UAAU;IAChH,iBAAe,EAAER,KAAA,CAAAS;;sBAClB,MAcS,CAdTZ,YAAA,CAcSa,iBAAA;MAdDC,GAAG,EAAC,SAAS;MAAEC,KAAK,EAAEZ,KAAA,CAAAa,OAAO;MAAGC,KAAK,EAAEd,KAAA,CAAAc,KAAK;MAAEC,MAAM,EAAC;;wBAC3D,MAEc,CAFdlB,YAAA,CAEcmB,sBAAA;QAFDL,GAAG,EAAC,KAAK;QAACM,KAAK,EAAC,cAAc;QAACC,IAAI,EAAC;;0BAC/C,MAA8C,CAA9CrB,YAAA,CAA8CsB,kBAAA;UAA7BC,KAAK,EAAEpB,KAAA,CAAAa,OAAO,CAACQ,UAAU;gEAAlBrB,KAAA,CAAAa,OAAO,CAACQ,UAAU,GAAApB,MAAA;;;gCAE5CJ,YAAA,CAEcmB,sBAAA;QAFDL,GAAG,EAAC,OAAO;QAACM,KAAK,EAAC,iBAAiB;QAACC,IAAI,EAAC;;0BACpD,MAAuD,CAAvDrB,YAAA,CAAuDyB,yBAAA;UAA/BF,KAAK,EAAEpB,KAAA,CAAAa,OAAO,CAACU,YAAY;gEAApBvB,KAAA,CAAAa,OAAO,CAACU,YAAY,GAAAtB,MAAA;;;gCAErDJ,YAAA,CAEcmB,sBAAA;QAFDL,GAAG,EAAC,IAAI;QAACM,KAAK,EAAC,aAAa;QAACC,IAAI,EAAC;;0BAC7C,MAAwC,CAAxCrB,YAAA,CAAwCsB,kBAAA;UAAvBC,KAAK,EAAEpB,KAAA,CAAAa,OAAO,CAACW,IAAI;gEAAZxB,KAAA,CAAAa,OAAO,CAACW,IAAI,GAAAvB,MAAA;;;gCAGtCJ,YAAA,CAEcmB,sBAAA;QAFDL,GAAG,EAAC,QAAQ;QAACM,KAAK,EAAC,SAAS;QAACC,IAAI,EAAC;;0BAC7C,MAA6C,CAA7CrB,YAAA,CAA6C4B,qBAAA;UAAzBL,KAAK,EAAEpB,KAAA,CAAAa,OAAO,CAACa,MAAM;gEAAd1B,KAAA,CAAAa,OAAO,CAACa,MAAM,GAAAzB,MAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}