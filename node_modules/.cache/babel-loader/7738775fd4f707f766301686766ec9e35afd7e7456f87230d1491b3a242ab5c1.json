{"ast":null,"code":"import APIService from \"@/helpers/ApiService\";\nexport default {\n  data() {\n    return {\n      URL: \"http://localhost:44301/\",\n      ThongTinKH: {}\n    };\n  },\n  methods: {\n    getUserId() {\n      const userClientString = localStorage.getItem('userClient');\n      if (userClientString) {\n        try {\n          const userClient = JSON.parse(userClientString);\n          const userId = userClient.userId;\n          this.ThongTinKH.UserId = userId;\n          console.log('User ID:', this.ThongTinKH.UserId);\n        } catch (error) {\n          console.error('Error parsing userClient:', error);\n        }\n      } else {\n        console.log('No userClient found in localStorage');\n      }\n    },\n    handleOk() {\n      const Order = {\n        idUser: this.ThongTinKH.UserId,\n        tenKhachHang: this.ThongTinKH.TenKhachHang,\n        soDienThoai: this.ThongTinKH.SoDienThoai,\n        diaChi: this.ThongTinKH.DiaChi,\n        tinh: this.ThongTinKH.Tinh,\n        huyen: this.ThongTinKH.Huyen,\n        xa: this.ThongTinKH.Xa,\n        trangThaiDonHang: 1\n      };\n      // APIService.post(\"NhaXuatBan/Create\",this.nxb)\n      APIService.post(\"/Order/Create\", Order).then(response => {\n        console.log('orderData', response.data);\n        // Lấy orderId từ response và lưu vào trường dữ liệu\n        var orderId = response.data.id;\n        console.log('order', response.data.data.id);\n        console.log('gio hang', this.$store.state.cart);\n        //this.OrderDetail();\n      }).catch(error => {\n        console.log('orderloi', error);\n      });\n    },\n    OrderDetail() {\n      this.$store.state.cart.forEach(product => {\n        const orderDetail = {\n          OrderID: this.orderId,\n          ProductID: product.ProductsId,\n          // Thay đổi logic tùy thuộc vào cách bạn lưu trữ ProductId\n          Quatity: product.qty,\n          Price: product.Price\n        };\n      });\n    }\n  },\n  mounted() {\n    this.getUserId();\n  }\n};","map":{"version":3,"names":["APIService","data","URL","ThongTinKH","methods","getUserId","userClientString","localStorage","getItem","userClient","JSON","parse","userId","UserId","console","log","error","handleOk","Order","idUser","tenKhachHang","TenKhachHang","soDienThoai","SoDienThoai","diaChi","DiaChi","tinh","Tinh","huyen","Huyen","xa","Xa","trangThaiDonHang","post","then","response","orderId","id","$store","state","cart","catch","OrderDetail","forEach","product","orderDetail","OrderID","ProductID","ProductsId","Quatity","qty","Price","mounted"],"sources":["D:\\DA\\DoAnFrontEnd\\DoAnClient\\client\\src\\views\\client\\ThanhToan.vue"],"sourcesContent":["<template>\r\n  <div style=\"margin-top: 70px\">\r\n    <div class=\"container\">\r\n      <div class=\"main-info\">\r\n        <a-row>\r\n          <a-col :span=\"16\" class=\"left\">\r\n            <a-form\r\n              :model=\"ThongTinKH\"\r\n              name=\"basic\"\r\n              ref=\"formRef\"\r\n              :rules=\"rules\"\r\n            >\r\n              <p>Thông tin giao hàng</p>\r\n              <div class=\"box\">\r\n                <a-row :gutter=\"[24]\">\r\n                  <a-col :span=\"12\">\r\n                    <a-form-item>\r\n                      <a-input\r\n                        v-model:value=\"ThongTinKH.TenKhachHang\"\r\n                        placeholder=\"input placeholder\"\r\n                      />\r\n                    </a-form-item>\r\n                  </a-col>\r\n                  <a-col :span=\"12\">\r\n                    <a-form-item>\r\n                      <a-input\r\n                        v-model:value=\"ThongTinKH.SoDienThoai\"\r\n                        placeholder=\"Số điện thoại\"\r\n                      />\r\n                    </a-form-item>\r\n                  </a-col>\r\n                </a-row>\r\n                <!-- <a-row :gutter=\"[20]\">\r\n                <a-col :span=\"8\">\r\n                  <a-form-item >\r\n                    <a-select v-model:value=\"ThongTinKH.name\" placeholder=\"Tỉnh/Thành phố\">\r\n                      <a-select-option value=\"shanghai\">Zone one</a-select-option>\r\n                      <a-select-option value=\"beijing\">Zone two</a-select-option>\r\n                    </a-select>\r\n                  </a-form-item>\r\n                </a-col>\r\n                <a-col :span=\"8\">\r\n                  <a-form-item >\r\n                    <a-select v-model:value=\"ThongTinKH.name\" placeholder=\"Quận/Huyện\">\r\n                      <a-select-option value=\"shanghai\">Zone one</a-select-option>\r\n                      <a-select-option value=\"beijing\">Zone two</a-select-option>\r\n                    </a-select>\r\n                  </a-form-item>\r\n                </a-col>\r\n                <a-col :span=\"8\">\r\n                  <a-form-item >\r\n                    <a-select  placeholder=\"please select your zone\">\r\n                      <a-select-option value=\"shanghai\">Zone one</a-select-option>\r\n                      <a-select-option value=\"beijing\">Zone two</a-select-option>\r\n                    </a-select>\r\n                  </a-form-item>\r\n                </a-col>\r\n              </a-row> -->\r\n                <a-form-item>\r\n                  <a-input v-model:value=\"ThongTinKH.Tinh\" placeholder=\"Tỉnh\" />\r\n                </a-form-item>\r\n                <a-form-item>\r\n                  <a-input\r\n                    v-model:value=\"ThongTinKH.Huyen\"\r\n                    placeholder=\"Huyện\"\r\n                  />\r\n                </a-form-item>\r\n                <a-form-item>\r\n                  <a-input v-model:value=\"ThongTinKH.Xa\" placeholder=\"Xã\" />\r\n                </a-form-item>\r\n                <a-form-item>\r\n                  <a-textarea\r\n                    :rows=\"5\"\r\n                    v-model:value=\"ThongTinKH.DiaChi\"\r\n                    placeholder=\"Dia chi cu the\"\r\n                  />\r\n                </a-form-item>\r\n                <a-form-item>\r\n                  <a-textarea\r\n                    :rows=\"5\"\r\n                    v-model:value=\"ThongTinKH.GhiChu\"\r\n                    placeholder=\"Ghi chu\"\r\n                  />\r\n                </a-form-item>\r\n              </div>\r\n              <div class=\"btn-submit\">\r\n                <a-button @click=\"handleOk\" size=\"large\" type=\"success\"\r\n                  >Hoàn thành</a-button\r\n                >\r\n              </div>\r\n            </a-form>\r\n          </a-col>\r\n          <a-col :span=\"8\">\r\n            <div class=\"order\">\r\n              <p class=\"outer-title\">\r\n                <span class=\"title\">Đơn hàng </span>\r\n                <span class=\"tt-bs\"\r\n                  >( {{ $store.state.cart.length }} sản phẩm )</span\r\n                >\r\n              </p>\r\n              <div class=\"list-in-order\">\r\n                <div\r\n                  v-for=\"item in $store.state.cart\"\r\n                  :key=\"item.id\"\r\n                  class=\"item\"\r\n                >\r\n                  <div class=\"left\">\r\n                    <img :src=\"URL + item.pathAnh\" alt=\"\">\r\n                  </div>\r\n                  <div class=\"mid\">\r\n                    <p class=\"name\">{{ item.tenSach }}</p>\r\n                    <p class=\"price\">\r\n                      <span class=\"price_new\">{{ item.giaTien }}</span>\r\n                      <span class=\"normal\">{{ item.giaTien }}</span>\r\n                    </p>\r\n                    <p class=\"quantity\">\r\n                      x {{ item.quantity }}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"discount\">\r\n                            <p class=\"title\">Mã giảm giá</p>\r\n\r\n                            <div class=\"c-box_promotion\">\r\n                                <input type=\"text\" class=\"c-input_promotion\" id=\"discount_code\" value=\"\" placeholder=\"Nhập mã giảm giá...\">\r\n                                <a class=\"c-btn c-btn_promotion\" href=\"javascript:void(0)\" onclick=\"validApplyDiscount();\" title=\"Gửi\">\r\n                                    Áp dụng                                </a>\r\n                                \r\n                            </div>\r\n\r\n                        </div>\r\n                        <p class=\"discount_value\"><span>Giảm giá</span><span class=\"discount_money\"></span></p>\r\n                        <p class=\"total  fix\">\r\n                            <span>Tổng cộng</span><span class=\"right total_temporary\">{{ $store.state.cartTotal}}</span>\r\n                        </p>\r\n\r\n            </div>\r\n          </a-col>\r\n        </a-row>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport APIService from \"@/helpers/ApiService\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      URL: \"http://localhost:44301/\",\r\n      ThongTinKH: {},\r\n      \r\n    };\r\n  },\r\n  methods: {\r\n    getUserId(){\r\n      const userClientString = localStorage.getItem('userClient');\r\n      if (userClientString) {\r\n        try {\r\n          const userClient = JSON.parse(userClientString);\r\n          const userId = userClient.userId;\r\n          this.ThongTinKH.UserId = userId;\r\n          console.log('User ID:', this.ThongTinKH.UserId);\r\n        } catch (error) {\r\n          console.error('Error parsing userClient:', error);\r\n        }\r\n      } else {\r\n        console.log('No userClient found in localStorage');\r\n      }\r\n    },\r\n    handleOk() {\r\n      const Order ={\r\n        idUser : this.ThongTinKH.UserId,\r\n        tenKhachHang: this.ThongTinKH.TenKhachHang,\r\n        soDienThoai: this.ThongTinKH.SoDienThoai,\r\n        diaChi: this.ThongTinKH.DiaChi,\r\n        tinh: this.ThongTinKH.Tinh,\r\n        huyen: this.ThongTinKH.Huyen,\r\n        xa: this.ThongTinKH.Xa,\r\n        trangThaiDonHang: 1\r\n      }\r\n      // APIService.post(\"NhaXuatBan/Create\",this.nxb)\r\n      APIService.post(\"/Order/Create\", Order)\r\n      .then(response =>{\r\n        console.log('orderData',response.data);\r\n        // Lấy orderId từ response và lưu vào trường dữ liệu\r\n        var orderId = response.data.id;\r\n        console.log('order', response.data.data.id);\r\n        console.log('gio hang', this.$store.state.cart)\r\n        //this.OrderDetail();\r\n      })\r\n      .catch(error => {\r\n        console.log('orderloi',error);\r\n      })\r\n      \r\n    },\r\n    OrderDetail(){\r\n      this.$store.state.cart.forEach(product => {\r\n        const orderDetail = {\r\n          OrderID: this.orderId,\r\n          ProductID: product.ProductsId,  // Thay đổi logic tùy thuộc vào cách bạn lưu trữ ProductId\r\n          Quatity: product.qty,\r\n          Price: product.Price\r\n                };\r\n      })\r\n    }\r\n  },\r\n  mounted(){\r\n    this.getUserId();\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n.left {\r\n  position: relative;\r\n  border: 1px solid #ddd;\r\n  border-radius: 5px;\r\n  padding: 20px 20px 24px;\r\n}\r\n.btn-submit {\r\n  text-align: center;\r\n  margin-top: 36px;\r\n}\r\n.btn-submit a {\r\n  background: #e9262a;\r\n  padding: 15px 27px;\r\n  color: #fff;\r\n  text-transform: uppercase;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  font-weight: 700;\r\n}\r\n .order {\r\n    padding: 18px 20px 22px 20px;\r\n    border: 1px solid #dddddd;\r\n    border-radius: 5px;\r\n}\r\n.order .outer-title {\r\n    font-size: 18px;\r\n    font-weight: 700;\r\n    border-bottom: 1px solid #eee;\r\n    padding-bottom: 10px;\r\n    margin-bottom: 20px;\r\n}\r\n.order .list-in-order .item {\r\n    display: grid;\r\n    grid-template-columns: 1fr 4fr;\r\n    grid-gap: 20px;\r\n    margin-bottom: 20px;\r\n    position: relative;\r\n}\r\n.order .list-in-order .item .left {\r\n    width: 100px;\r\n    height: 100px;\r\n    overflow: hidden;\r\n    border: 1px solid #eee;\r\n}\r\n.order .list-in-order .item .left img {\r\n    width: 100%;\r\n    height: 100%;\r\n    object-fit: contain;\r\n}\r\n.order .list-in-order .item .mid .name {\r\n    font-size: 15px;\r\n    line-height: 18px;\r\n    font-weight: 700;\r\n    color: #252525;\r\n}\r\n.order .list-in-order .item .mid .price {\r\n    margin-top: 10px;\r\n    margin-bottom: 10px;\r\n    color: #e9262a;\r\n    font-size: 16px;\r\n    font-weight: 700;\r\n}\r\n.order .list-in-order .item .mid .price .normal {\r\n    text-decoration: line-through;\r\n    color: #252525;\r\n    font-weight: 400;\r\n    margin-left: 10px;\r\n}\r\n.order .discount {\r\n    padding: 20px 20px 25px 20px;\r\n    border: 1px solid #ddd;\r\n    margin-bottom: 20px;\r\n}\r\n.order .discount .title {\r\n    font-size: 18px;\r\n    font-weight: 700;\r\n    line-height: 22px;\r\n    color: #252525;\r\n}\r\n.order .discount .c-box_promotion {\r\n    display: flex;\r\n    width: 100%;\r\n}\r\n.order .ship-fee {\r\n    padding-top: 22px;\r\n    padding-bottom: 23px;\r\n}\r\n.order .fix {\r\n    background-color: #eee;\r\n    margin: 0;\r\n}\r\n.order .fix span {\r\n    margin-left: 20px;\r\n}\r\n.order .fix .right {\r\n    float: right;\r\n    margin-right: 20px;\r\n}\r\n.order .temporary {\r\n    padding-top: 20px;\r\n    padding-bottom: 20px;\r\n}\r\n.order .fix span {\r\n    margin-left: 20px;\r\n}\r\n.order .fix .right {\r\n    float: right;\r\n    margin-right: 20px;\r\n}\r\n.order .discount_value {\r\n    padding-top: 22px;\r\n    padding-bottom: 23px;\r\n}\r\n.order .discount_value span {\r\n    margin-left: 20px;\r\n}\r\n.order .discount_value .discount_money {\r\n    float: right;\r\n    margin-right: 20px;\r\n}\r\n.order .total {\r\n    background-color: #fff;\r\n}\r\n.order .total span {\r\n    margin: 0;\r\n    padding: 0;\r\n    font-size: 16px;\r\n    font-weight: 700;\r\n}\r\n .order .total .right {\r\n    color: #e9262a;\r\n    margin: 0;\r\n}\r\nmain .main-info .order .fix .right {\r\n    float: right;\r\n\r\n}\r\n</style>"],"mappings":"AAkJA,OAAOA,UAAS,MAAO,sBAAsB;AAC7C,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,GAAG,EAAE,yBAAyB;MAC9BC,UAAU,EAAE,CAAC;IAEf,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACPC,SAASA,CAAA,EAAE;MACT,MAAMC,gBAAe,GAAIC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC;MAC3D,IAAIF,gBAAgB,EAAE;QACpB,IAAI;UACF,MAAMG,UAAS,GAAIC,IAAI,CAACC,KAAK,CAACL,gBAAgB,CAAC;UAC/C,MAAMM,MAAK,GAAIH,UAAU,CAACG,MAAM;UAChC,IAAI,CAACT,UAAU,CAACU,MAAK,GAAID,MAAM;UAC/BE,OAAO,CAACC,GAAG,CAAC,UAAU,EAAE,IAAI,CAACZ,UAAU,CAACU,MAAM,CAAC;QACjD,EAAE,OAAOG,KAAK,EAAE;UACdF,OAAO,CAACE,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;QACnD;MACF,OAAO;QACLF,OAAO,CAACC,GAAG,CAAC,qCAAqC,CAAC;MACpD;IACF,CAAC;IACDE,QAAQA,CAAA,EAAG;MACT,MAAMC,KAAI,GAAG;QACXC,MAAK,EAAI,IAAI,CAAChB,UAAU,CAACU,MAAM;QAC/BO,YAAY,EAAE,IAAI,CAACjB,UAAU,CAACkB,YAAY;QAC1CC,WAAW,EAAE,IAAI,CAACnB,UAAU,CAACoB,WAAW;QACxCC,MAAM,EAAE,IAAI,CAACrB,UAAU,CAACsB,MAAM;QAC9BC,IAAI,EAAE,IAAI,CAACvB,UAAU,CAACwB,IAAI;QAC1BC,KAAK,EAAE,IAAI,CAACzB,UAAU,CAAC0B,KAAK;QAC5BC,EAAE,EAAE,IAAI,CAAC3B,UAAU,CAAC4B,EAAE;QACtBC,gBAAgB,EAAE;MACpB;MACA;MACAhC,UAAU,CAACiC,IAAI,CAAC,eAAe,EAAEf,KAAK,EACrCgB,IAAI,CAACC,QAAO,IAAI;QACfrB,OAAO,CAACC,GAAG,CAAC,WAAW,EAACoB,QAAQ,CAAClC,IAAI,CAAC;QACtC;QACA,IAAImC,OAAM,GAAID,QAAQ,CAAClC,IAAI,CAACoC,EAAE;QAC9BvB,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEoB,QAAQ,CAAClC,IAAI,CAACA,IAAI,CAACoC,EAAE,CAAC;QAC3CvB,OAAO,CAACC,GAAG,CAAC,UAAU,EAAE,IAAI,CAACuB,MAAM,CAACC,KAAK,CAACC,IAAI;QAC9C;MACF,CAAC,EACAC,KAAK,CAACzB,KAAI,IAAK;QACdF,OAAO,CAACC,GAAG,CAAC,UAAU,EAACC,KAAK,CAAC;MAC/B,CAAC;IAEH,CAAC;IACD0B,WAAWA,CAAA,EAAE;MACX,IAAI,CAACJ,MAAM,CAACC,KAAK,CAACC,IAAI,CAACG,OAAO,CAACC,OAAM,IAAK;QACxC,MAAMC,WAAU,GAAI;UAClBC,OAAO,EAAE,IAAI,CAACV,OAAO;UACrBW,SAAS,EAAEH,OAAO,CAACI,UAAU;UAAG;UAChCC,OAAO,EAAEL,OAAO,CAACM,GAAG;UACpBC,KAAK,EAAEP,OAAO,CAACO;QACT,CAAC;MACX,CAAC;IACH;EACF,CAAC;EACDC,OAAOA,CAAA,EAAE;IACP,IAAI,CAAC/C,SAAS,CAAC,CAAC;EAClB;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}