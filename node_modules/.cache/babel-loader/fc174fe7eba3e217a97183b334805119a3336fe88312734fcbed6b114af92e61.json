{"ast":null,"code":"import PageHeader from \"@/components/page-header\";\nimport appConfig from \"../../../../app.config\";\nimport APIService from \"@/helpers/ApiService\";\nimport Pagination from \"../../../components/widgets/Pagination.vue\";\nimport { toast } from 'vue3-toastify';\nimport 'vue3-toastify/dist/index.css';\nimport Swal from \"sweetalert2\";\nexport default {\n  components: {\n    PageHeader,\n    Pagination\n  },\n  page: {\n    title: \"Quản lý văn bản\",\n    meta: [{\n      name: \"Quản lý văn bản\",\n      content: appConfig.description\n    }]\n  },\n  mounted() {\n    this.LoadData(this.optionPage.pageIndex, this.optionPage.pageSize);\n  },\n  data() {\n    return {\n      title: \"Quản lý văn bản\",\n      items: [{\n        text: \"Dashboard\",\n        href: \"/\"\n      }, {\n        text: \"Quản lý văn bản\",\n        active: true\n      }],\n      lstChuyenMucTT: [],\n      optionPage: {\n        pageIndex: 1,\n        pageSize: 10,\n        totalCount: 0\n      },\n      formSearch: {\n        NameTextFilter: \"\",\n        NumberFilter: \"\"\n      },\n      id: this.$route.params.id,\n      tableColumns: [{\n        title: \"TT\",\n        dataIndex: \"tt\",\n        key: \"ThuTuHienThi\",\n        sorter: (a, b) => a.tt - b.tt\n      },\n      // Sắp xếp theo ID },\n      {\n        title: \"Tên văn bản \",\n        dataIndex: \"nameText\",\n        key: \"nameText\"\n      }, {\n        title: \"Số hiệu văn bản\",\n        dataIndex: \"number\",\n        key: \"sohieu\"\n      }, {\n        title: \"Ngày có hiệu lực\",\n        dataIndex: \"effectiveDate\",\n        key: \"ngayhieuluc\"\n      }, {\n        title: \"Cơ quan ban hành\",\n        dataIndex: \"agencyIssued\",\n        key: \"coquanbanhanh\"\n      }, {\n        title: \"Ngày ban hành\",\n        dataIndex: \"publicDate\",\n        key: \"ngaybanhanh\"\n      }, {\n        title: \"Trạng Thái\",\n        dataIndex: \"status\",\n        key: \"trangthai\"\n      }, {\n        title: \"Loại văn bản\",\n        dataIndex: \"documentType\",\n        key: \"loaivanban\"\n      }, {\n        title: \"Tài liệu\",\n        dataIndex: \"document\",\n        key: \"tailieu\"\n      }, {\n        title: \"Thao tác\",\n        key: \"action\",\n        width: 100\n      }],\n      idDanhMuc: '03'\n    };\n  },\n  methods: {\n    async LoadData(pageIndex, pageSize, params) {\n      var searchParam = {\n        pageIndex: pageIndex,\n        pageSize: pageSize,\n        MaDanhMuc: this.idDanhMuc\n      };\n      if (params) {\n        searchParam = params;\n      }\n      var urlQuery = new URLSearchParams(searchParam).toString();\n      var result = await APIService.get(`/VanBan/GetDataByPage?` + urlQuery);\n      this.lstChuyenMucTT = result.data.data.items;\n      if (result.data.data != null && result.data.data.items != null) {\n        var res = result.data.data;\n        this.lstChuyenMucTT = result.data.data.items;\n        this.optionPage.pageIndex = res.pageIndex;\n        this.optionPage.pageSize = res.pageSize;\n        this.optionPage.totalCount = res.totalCount;\n        console.log('chuyen muc', this.lstChuyenMucTT);\n      }\n    },\n    openModalAdd() {\n      this.$refs.modalAddEditChuyenMucTT.showModal();\n    },\n    // openModalDetail(id) {\n    //   this.$refs.modalDetailChuyenMucTT.showModal(id);\n    // },\n    // openModalEdit(id) {\n    //   this.$refs.modalAddEditChuyenMucTT.showModal(id);\n    // },\n    SearchData() {\n      var searchParam = {\n        pageIndex: this.optionPage.pageIndex,\n        pageSize: this.optionPage.pageSize,\n        NameTextFilter: this.formSearch.NameTextFilter,\n        NumberFilter: this.formSearch.NumberFilter\n      };\n      this.LoadData(1, 10, searchParam);\n    },\n    handlePageChange(page) {\n      this.optionPage.pageIndex = page;\n      this.LoadData(this.optionPage.pageIndex, this.optionPage.pageSize);\n    },\n    async deleteVanBan(id) {\n      var res = await APIService.delete(`/VanBan/delete/${id}`);\n      if (res.data.status !== \"Success\") {\n        this.$message.error();\n        this.LoadData(this.optionPage.pageIndex, this.optionPage.pageSize);\n      }\n      this.$message.success(\"Xóa văn bản thành công\");\n      this.LoadData(this.optionPage.pageIndex, this.optionPage.pageSize);\n    }\n  }\n};","map":{"version":3,"names":["PageHeader","appConfig","APIService","Pagination","toast","Swal","components","page","title","meta","name","content","description","mounted","LoadData","optionPage","pageIndex","pageSize","data","items","text","href","active","lstChuyenMucTT","totalCount","formSearch","NameTextFilter","NumberFilter","id","$route","params","tableColumns","dataIndex","key","sorter","a","b","tt","width","idDanhMuc","methods","searchParam","MaDanhMuc","urlQuery","URLSearchParams","toString","result","get","res","console","log","openModalAdd","$refs","modalAddEditChuyenMucTT","showModal","SearchData","handlePageChange","deleteVanBan","delete","status","$message","error","success"],"sources":["D:\\HINET_1\\BacKan\\client\\src\\views\\dashboard\\QL_VanBan\\index.vue"],"sourcesContent":["<template>\r\n  <PageHeader :title=\"title\" :items=\"items\" />\r\n  <a-row>\r\n    <a-col :span=\"24\">\r\n      <a-card title=\"Danh sách văn bản\"> \r\n        <template #extra>\r\n          <router-link :to=\"{ name: 'QL_VanBan_Create'}\">\r\n          <a-button @click=\"QL_VanBan_Create\" type=\"primary\">Thêm mới</a-button>\r\n                      \r\n                    </router-link>\r\n        </template>\r\n        <div>\r\n            <a-row  style=\"margin-bottom: 20px;\" :gutter=\"24\">\r\n            <a-col :span=\"10\">\r\n              <a-input v-model:value=\"formSearch.NameTextFilter\"  placeholder=\"Tên Văn Bản\">\r\n                <template #prefix>\r\n                  <i class=\"ri-search-line search-icon\"></i>\r\n                </template>\r\n              </a-input>\r\n            </a-col>\r\n            <a-col :span=\"10\">\r\n              <a-input v-model:value=\"formSearch.NumberFilter\" placeholder=\"Số hiệu văn bản\">\r\n                <template #prefix>  \r\n                  <i class=\"ri-search-line search-icon\"></i>\r\n                </template>\r\n              </a-input>\r\n            </a-col>\r\n            <a-col :span=\"4\">\r\n                      <div>\r\n                        <a-button type=\"primary\"  @click=\"SearchData\">\r\n                          <i class=\"ri-equalizer-fill me-2 align-bottom\"></i>Tìm\r\n                          kiếm\r\n                        </a-button>\r\n                      </div>\r\n                    </a-col>\r\n          </a-row>\r\n            <div>\r\n              <a-table\r\n              :columns=\"tableColumns\"\r\n              :dataSource=\"lstChuyenMucTT\"\r\n              :pagination=\"false\"\r\n              :loading=\"loading\">\r\n                <template #bodyCell=\"{ column, record }\">\r\n                  <template v-if=\"column.key === 'action'\">\r\n                    <ul class=\"list-inline hstack gap-2 mb-0\">\r\n                      <li class=\"list-inline-item\" data-bs-toggle=\"tooltip\" data-bs-trigger=\"hover\" data-bs-placement=\"top\" title=\"Chi tiết\">\r\n                        <a :href=\"'/dashboard/van-ban/Detail/' + record.id\" class=\"text-primary d-inline-block edit-item-btn\">\r\n                          <i class=\"ri-information-line fs-16\"></i>\r\n                        </a>\r\n                      </li>\r\n                      <li class=\"list-inline-item edit\" data-bs-toggle=\"tooltip\" data-bs-trigger=\"hover\" data-bs-placement=\"top\" title=\"Chỉnh sửa\">\r\n                        <a :href=\"'/dashboard/van-ban/Edit/' + record.id\" class=\"text-primary d-inline-block edit-item-btn\">\r\n                          <i class=\"ri-pencil-fill fs-16\"></i>\r\n                        </a>\r\n                      </li>\r\n                      <li class=\"list-inline-item\" data-bs-toggle=\"tooltip\" data-bs-trigger=\"hover\" data-bs-placement=\"top\"\r\n                    title=\"Remove\">\r\n                    <a-popconfirm class=\"text-danger\" title=\"Xác nhận xóa ?\" ok-text=\"Xóa\" cancel-text=\"Hủy\"\r\n                      @confirm=\"deleteVanBan(record.id)\" @cancel=\"cancel\">\r\n                      <i class=\"ri-delete-bin-5-fill fs-16\"></i>\r\n                    </a-popconfirm>\r\n                  </li>\r\n                    </ul>\r\n                  </template>\r\n                </template>\r\n              </a-table>\r\n              <Pagination :total=\"optionPage.totalCount\" :current=\"optionPage.pageIndex\" :per-page=\"optionPage.pageSize\"\r\n            :pageRange=\"optionPage.totalCount\" @page-changed=\"handlePageChange\" />\r\n            </div>                        \r\n        </div>\r\n      </a-card>\r\n    </a-col>\r\n  </a-row>\r\n  <!-- <ModalAddEditChuyenMucTT\r\n    @addSuccess=\"LoadData(optionPage.pageIndex, optionPage.pageSize)\"\r\n    ref=\"modalAddEditChuyenMucTT\"\r\n  ></ModalAddEditChuyenMucTT>\r\n  <ModalDetailChuyenMucTT ref=\"modalDetailChuyenMucTT\"></ModalDetailChuyenMucTT> -->\r\n</template>\r\n\r\n<script>\r\nimport PageHeader from \"@/components/page-header\";\r\nimport appConfig from \"../../../../app.config\";\r\nimport APIService from \"@/helpers/ApiService\";\r\nimport Pagination from \"../../../components/widgets/Pagination.vue\";\r\nimport { toast } from 'vue3-toastify';\r\nimport 'vue3-toastify/dist/index.css';\r\nimport Swal from \"sweetalert2\";\r\nexport default {\r\n  components: {\r\n    PageHeader,\r\n    Pagination,\r\n  },\r\n  page: {\r\n    title: \"Quản lý văn bản\",\r\n    meta: [\r\n      {\r\n        name: \"Quản lý văn bản\",\r\n        content: appConfig.description,\r\n      },\r\n    ],\r\n  },\r\n  mounted(){\r\n    this.LoadData(this.optionPage.pageIndex, this.optionPage.pageSize);\r\n  },\r\n  data(){\r\n    return{\r\n        title: \"Quản lý văn bản\",\r\n        items: [\r\n            {\r\n            text: \"Dashboard\",\r\n            href: \"/\",\r\n            },\r\n            {\r\n            text: \"Quản lý văn bản\",\r\n            active: true,\r\n            },\r\n        ],\r\n        lstChuyenMucTT:[],\r\n        optionPage: {\r\n          pageIndex: 1,\r\n          pageSize: 10,\r\n          totalCount: 0,\r\n        },\r\n        formSearch: {\r\n          NameTextFilter: \"\",\r\n          NumberFilter: \"\",\r\n        },\r\n        id: this.$route.params.id,\r\n        tableColumns: [\r\n       \r\n        { title: \"TT\", dataIndex: \"tt\", key: \"ThuTuHienThi\", sorter: (a, b) => a.tt - b.tt}, // Sắp xếp theo ID },\r\n        { title: \"Tên văn bản \", dataIndex: \"nameText\", key: \"nameText\" },\r\n        { title: \"Số hiệu văn bản\", dataIndex: \"number\", key: \"sohieu\" },\r\n        { title: \"Ngày có hiệu lực\", dataIndex: \"effectiveDate\", key: \"ngayhieuluc\" },\r\n        { title: \"Cơ quan ban hành\", dataIndex: \"agencyIssued\", key: \"coquanbanhanh\" },\r\n        { title: \"Ngày ban hành\", dataIndex: \"publicDate\", key: \"ngaybanhanh\" },\r\n        { title: \"Trạng Thái\", dataIndex: \"status\", key: \"trangthai\" },\r\n        { title: \"Loại văn bản\", dataIndex: \"documentType\", key: \"loaivanban\" },\r\n        { title: \"Tài liệu\", dataIndex: \"document\", key: \"tailieu\" },\r\n        { title: \"Thao tác\", key: \"action\", width: 100},\r\n        \r\n      ],\r\n      idDanhMuc: '03'\r\n    }\r\n  },\r\n  methods:{\r\n    async LoadData(pageIndex, pageSize, params){\r\n        var searchParam = {\r\n          pageIndex: pageIndex,\r\n          pageSize: pageSize,\r\n          MaDanhMuc: this.idDanhMuc\r\n        };\r\n        if (params) {\r\n          searchParam = params;\r\n        }\r\n      var urlQuery = new URLSearchParams(searchParam).toString();\r\n      var result = await APIService.get(`/VanBan/GetDataByPage?` + urlQuery);\r\n      this.lstChuyenMucTT = result.data.data.items;\r\n      if (result.data.data != null && result.data.data.items != null) {\r\n        var res = result.data.data;\r\n        this.lstChuyenMucTT = result.data.data.items;\r\n        this.optionPage.pageIndex = res.pageIndex;\r\n        this.optionPage.pageSize = res.pageSize;\r\n        this.optionPage.totalCount = res.totalCount;\r\n        console.log('chuyen muc', this.lstChuyenMucTT)\r\n      }\r\n    },\r\n    openModalAdd() {\r\n      this.$refs.modalAddEditChuyenMucTT.showModal();\r\n    },\r\n    // openModalDetail(id) {\r\n    //   this.$refs.modalDetailChuyenMucTT.showModal(id);\r\n    // },\r\n    // openModalEdit(id) {\r\n    //   this.$refs.modalAddEditChuyenMucTT.showModal(id);\r\n    // },\r\n    SearchData(){\r\n      var searchParam = {\r\n        pageIndex: this.optionPage.pageIndex,\r\n        pageSize: this.optionPage.pageSize,\r\n        NameTextFilter: this.formSearch.NameTextFilter,\r\n        NumberFilter: this.formSearch.NumberFilter,\r\n      };\r\n\r\n      this.LoadData(1, 10, searchParam);\r\n    },\r\n    handlePageChange(page) {\r\n        this.optionPage.pageIndex = page;\r\n        this.LoadData(this.optionPage.pageIndex, this.optionPage.pageSize);\r\n      },\r\n    async deleteVanBan(id) {\r\n      var res = await APIService.delete(`/VanBan/delete/${id}`);\r\n      if (res.data.status !== \"Success\") {\r\n        this.$message.error();\r\n        this.LoadData(this.optionPage.pageIndex, this.optionPage.pageSize);\r\n      }\r\n      this.$message.success(\"Xóa văn bản thành công\");\r\n      this.LoadData(this.optionPage.pageIndex, this.optionPage.pageSize);\r\n    },\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}