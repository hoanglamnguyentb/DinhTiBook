{"ast":null,"code":"import { ref } from \"vue\";\nimport Multiselect from \"@vueform/multiselect\";\nimport \"@vueform/multiselect/themes/default.css\";\nimport DropZone from \"@/components/widgets/dropZone\";\nimport useVuelidate from \"@vuelidate/core\";\nimport { required, helpers } from '@vuelidate/validators';\nimport flatPickr from \"vue-flatpickr-component\";\nimport \"flatpickr/dist/flatpickr.css\";\nimport appConfig from \"../../../../app.config\";\nimport PageHeader from \"@/components/page-header\";\nimport { QuillEditor } from '@vueup/vue-quill';\nimport '@vueup/vue-quill/dist/vue-quill.snow.css';\nimport FileManager from \"@/components/FileManager\";\nimport APIService from \"@/helpers/ApiService\";\nimport { toast } from 'vue3-toastify';\nimport 'vue3-toastify/dist/index.css';\nexport default {\n  name: 'YourComponentName',\n  components: {\n    DropZone,\n    PageHeader,\n    Multiselect,\n    flatPickr,\n    QuillEditor,\n    FileManager\n  },\n  setup() {\n    return {\n      v$: useVuelidate(),\n      title: \"Thêm mới văn bản\",\n      items: [{\n        text: \"Văn Bản\",\n        href: \"/Van-ban\"\n      }, {\n        text: \"thêm mới văn bản\",\n        active: true\n      }],\n      editorOptions: {\n        modules: {\n          // Cấu hình toolbar của bạn\n        },\n        placeholder: 'Nhập nội dung văn bản...',\n        theme: 'snow'\n      },\n      datetimeConfig: {\n        dateFormat: \"d/m/Y\"\n      },\n      post: {\n        nameText: \"\",\n        number: \"\",\n        effectiveDate: new Date(),\n        agencyIssued: \"\",\n        publicDate: new Date(),\n        status: 0,\n        documentType: 0,\n        document: \"\"\n      },\n      loaivanban: [{\n        value: '0',\n        label: 'đã xuất bản'\n      }, {\n        value: '1',\n        label: 'chưa xuất bản'\n      }, {\n        value: '2',\n        label: 'Liên hệ'\n      }],\n      trangthai: [{\n        value: '0',\n        label: 'đã xuất bản'\n      }, {\n        value: '1',\n        label: 'chưa xuất bản'\n      }, {\n        value: '2',\n        label: 'Liên hệ'\n      }],\n      submitted: false,\n      showFileManager: false,\n      errMessage: null,\n      isLoading: false,\n      acceptType: ['image/png', 'image/jpg', 'image/jpeg']\n    };\n  },\n  methods: {\n    async onSubmit() {\n      // this.v$.$touch();\n      // const result = await this.v$.$validate();\n      // if (!result) {\n      //   this.isLoading = false;\n      //   return;\n      // }\n      try {\n        await APIService.post(\"VanBan/create\", this.post);\n        toast.success(\"Thêm văn bản thành công\", {\n          theme: \"colored\",\n          autoClose: 2000\n        });\n      } catch (e) {\n        this.submitted = false;\n        this.isLoading = false;\n        if (e.status == 401) {\n          toast.error(\"Bạn không có quyền truy cập.\", {\n            theme: \"colored\",\n            autoClose: 2000\n          });\n        } else {\n          if (e.data && e.data.Message) {\n            this.errMessage = e.data.Message;\n            toast.error(e.data.Message, {\n              theme: \"colored\",\n              autoClose: 2000\n            });\n          } else {\n            toast.error(\"Thêm mới văn bản thất bại. Vui lòng thử lại sau.\", {\n              theme: \"colored\",\n              autoClose: 2000\n            });\n          }\n        }\n      }\n    }\n  },\n  validations() {\n    return {\n      post: {\n        nameText: {\n          required: helpers.withMessage(\"Tên văn bản không được để trống\", required)\n        },\n        number: {\n          required: helpers.withMessage(\"Số hiệu không được để trống\", required)\n        },\n        effectiveDate: {\n          required: helpers.withMessage(\"Ngày có hiệu lực không được để trống\", required)\n        },\n        agencyIssued: {\n          required: helpers.withMessage(\"cơ quan ban hành không được để trống\", required)\n        },\n        publicDate: {\n          required: helpers.withMessage(\"vui lòng chọn ngày ban hành\", required)\n        },\n        status: {\n          required: helpers.withMessage(\"vui lòng chọn trạng thái\", required)\n        },\n        documentType: {\n          required: helpers.withMessage(\"vui lòng chọn loại tài liệu\", required)\n        },\n        Document: {\n          required: helpers.withMessage(\"không để trống tài liệu\", required)\n        }\n      }\n    };\n  }\n};","map":{"version":3,"names":["ref","Multiselect","DropZone","useVuelidate","required","helpers","flatPickr","appConfig","PageHeader","QuillEditor","FileManager","APIService","toast","name","components","setup","v$","title","items","text","href","active","editorOptions","modules","placeholder","theme","datetimeConfig","dateFormat","post","nameText","number","effectiveDate","Date","agencyIssued","publicDate","status","documentType","document","loaivanban","value","label","trangthai","submitted","showFileManager","errMessage","isLoading","acceptType","methods","onSubmit","success","autoClose","e","error","data","Message","validations","withMessage","Document"],"sources":["D:\\HINET_1\\BacKan\\client\\src\\views\\dashboard\\QL_VanBan\\CreateVanBan.vue"],"sourcesContent":["<template>\r\n    <PageHeader :title=\"title\" :items=\"items\"/>\r\n    <a-card style=\"padding: 0;\">\r\n    <a-form layout=\"vertical\"\r\n      :model=\"formState\"\r\n      name=\"basic\"\r\n      autocomplete=\"off\"\r\n      @finish=\"onFinish\"\r\n      @finishFailed=\"onFinishFailed\" >\r\n     <h3>1.THÔNG TIN VĂN BẢN</h3>\r\n          <a-row :gutter=\"[24]\">\r\n            <a-col :span=\"12\">\r\n              <div class=\"mb-3\">\r\n                <label class=\"form-label\" for=\"title\">Tên văn bản</label>\r\n                <input type=\"text\" class=\"form-control\" \r\n                       :class=\"{'is-invalid': submitted && v$.post.NameText.$error}\"\r\n                       v-model=\"post.NameText\" placeholder=\"Nhập tên văn bản\" />\r\n              </div>\r\n            <div class=\"mb-3\">\r\n              <label class=\"form-label\" for=\"title\">số hiệu văn bản</label>\r\n              <input type=\"text\" class=\"form-control\" \r\n              :class=\"{\r\n                'is-invalid': submitted && v$.post.number.$error,\r\n              }\" id=\"product-title-input\" v-model=\"post.number\" placeholder=\"Nhập số hiệu văn bản\" />\r\n              <!-- <div v-for=\"(item, index) in v$.post.Title.$errors\" :key=\"index\" class=\"invalid-feedback\">\r\n                <span v-if=\"item.$message\">{{ item.$message }}</span>\r\n              </div> -->\r\n            </div>\r\n  \r\n              <div>\r\n                <label for=\"datepicker-publish-input\" class=\"form-label\">Ngày có hiệu lực</label>\r\n                <flat-pickr v-model=\"post.EffectiveDate\" :config=\"datetimeConfig\" placeholder=\"Chọn ngày có hiệu lực\" class=\"form-control\"></flat-pickr>\r\n              </div>\r\n              <div class=\"mb-3\">\r\n              <label class=\"form-label\" for=\"title\">Ban hành bởi</label>\r\n              <input type=\"text\" class=\"form-control\" \r\n              :class=\"{\r\n                'is-invalid': submitted && v$.post.AgencyIssued.$error,\r\n              }\" id=\"product-title-input\" v-model=\"post.AgencyIssued\" placeholder=\"Nhập số hiệu văn bản\" />\r\n              <!-- <div v-for=\"(item, index) in v$.post.Title.$errors\" :key=\"index\" class=\"invalid-feedback\">\r\n                <span v-if=\"item.$message\">{{ item.$message }}</span>\r\n              </div> -->\r\n            </div>\r\n            <div>\r\n              <label class=\"form-label\" for=\"title\">Trạng thái</label>\r\n              <Multiselect class=\"form-control\"\r\n              :class=\"{\r\n                  'is-invalid': submitted && v$.post.status.$error,\r\n                }\"\r\n              v-model=\"post.status\" value=\"0\" :close-on-select=\"true\" :searchable=\"true\"\r\n                :create-option=\"true\" :options=\"trangthai\" />\r\n              \r\n            </div>\r\n            </a-col>\r\n  \r\n            <a-col :span=\"12\">\r\n  \r\n              <div>\r\n                <label class=\"form-label\" for=\"title\">Loại văn bản</label>\r\n                <Multiselect class=\"form-control\"\r\n                             :class=\"{'is-invalid': submitted && v$.post.documentType.$error}\"\r\n                             v-model=\"post.documentType\" value=\"0\" :close-on-select=\"true\" :searchable=\"true\"\r\n                             :create-option=\"true\" :options=\"loaivanban\" />\r\n              </div>\r\n  \r\n              <div>\r\n              <label for=\"datepicker-publish-input\" class=\"form-label\">Ngày ban hành</label>\r\n              <flat-pickr v-model=\"post.publicDate\" :config=\"datetimeConfig\" placeholder=\"Chọn ngày có hiệu lực\" class=\"form-control\"></flat-pickr>\r\n            </div>\r\n            <div class=\"mb-3\">\r\n              <label class=\"form-label\" for=\"title\">Tài liệu</label>\r\n              <input type=\"text\" class=\"form-control\" \r\n              :class=\"{\r\n                'is-invalid': submitted && v$.post.Document.$error,\r\n              }\" id=\"product-title-input\" v-model=\"post.Document\" placeholder=\"Nhập số hiệu văn bản\" />\r\n              <!-- <div v-for=\"(item, index) in v$.post.Title.$errors\" :key=\"index\" class=\"invalid-feedback\">\r\n                <span v-if=\"item.$message\">{{ item.$message }}</span>\r\n              </div> -->\r\n            </div>\r\n            </a-col>\r\n          </a-row>\r\n       \r\n        <h3 style=\"margin-top: 30px\">2.NỘI DUNG & TRÍCH DẪN VĂN BẢN</h3>\r\n        <a-card-body>\r\n          <a-col>\r\n            <div class=\"mt-2\">\r\n              <label>Trích dẫn</label>\r\n              <textarea class=\"form-control\" v-model=\"post.Description\" placeholder=\"\" rows=\"3\"></textarea>\r\n            </div>\r\n            <div>\r\n              <label>Nội dung văn bản</label>\r\n              <QuillEditor \r\n                theme=\"snow\" \r\n                :options=\"editorOptions\"\r\n                v-model:content=\"post.Content\"\r\n                content-type=\"html\" />\r\n            </div>\r\n          </a-col>\r\n        </a-card-body>\r\n\r\n        <a-space direction=\"vertical\" style=\"margin-top: 30px\" >\r\n        <a-space>\r\n          <a-button variant=\"primary\"  @click=\"onSubmit\">\r\n           Lưu</a-button>\r\n        </a-space>\r\n         </a-space>\r\n    </a-form>\r\n  </a-card>\r\n\r\n  </template>\r\n  \r\n  <script>\r\n  import { ref } from \"vue\";\r\n  import Multiselect from \"@vueform/multiselect\";\r\n  import \"@vueform/multiselect/themes/default.css\";\r\n  import DropZone from \"@/components/widgets/dropZone\";\r\n  import useVuelidate from \"@vuelidate/core\";\r\n  import { required, helpers } from '@vuelidate/validators';\r\n  import flatPickr from \"vue-flatpickr-component\";\r\n  import \"flatpickr/dist/flatpickr.css\";\r\n  import appConfig from \"../../../../app.config\";\r\n  import PageHeader from \"@/components/page-header\";\r\n  import { QuillEditor } from '@vueup/vue-quill';\r\n  import '@vueup/vue-quill/dist/vue-quill.snow.css';\r\n  import FileManager from \"@/components/FileManager\";\r\n  import APIService from \"@/helpers/ApiService\";\r\n  import { toast } from 'vue3-toastify';\r\n  import 'vue3-toastify/dist/index.css';\r\n  \r\n  export default {\r\n    name: 'YourComponentName',\r\n    components: {\r\n      DropZone,\r\n      PageHeader,\r\n      Multiselect,\r\n      flatPickr,\r\n      QuillEditor,\r\n      FileManager\r\n    },\r\n    setup() {\r\n      return {\r\n        v$: useVuelidate(),\r\n        title: \"Thêm mới văn bản\",\r\n        items: [\r\n          { text: \"Văn Bản\", href: \"/Van-ban\" },\r\n          { text: \"thêm mới văn bản\", active: true }\r\n        ],\r\n        editorOptions: {\r\n          modules: {\r\n            // Cấu hình toolbar của bạn\r\n          },\r\n          placeholder: 'Nhập nội dung văn bản...',\r\n          theme: 'snow'\r\n        },\r\n        datetimeConfig: {\r\n          dateFormat: \"d/m/Y\",\r\n        },\r\n        post: {\r\n          nameText: \"\",\r\n          number: \"\",\r\n          effectiveDate: new Date(),\r\n          agencyIssued: \"\",\r\n          publicDate: new Date(),\r\n          status: 0,\r\n          documentType: 0,\r\n          document: \"\",\r\n        },\r\n        loaivanban: [\r\n          { value: '0', label: 'đã xuất bản' },\r\n          { value: '1', label: 'chưa xuất bản' },\r\n          { value: '2', label: 'Liên hệ' },\r\n        ],\r\n        trangthai: [\r\n          { value: '0', label: 'đã xuất bản' },\r\n          { value: '1', label: 'chưa xuất bản' },\r\n          { value: '2', label: 'Liên hệ' },\r\n        ],\r\n        submitted: false,\r\n        showFileManager: false,\r\n        errMessage: null,\r\n        isLoading: false,\r\n        acceptType: ['image/png', 'image/jpg', 'image/jpeg']\r\n      };\r\n    },\r\n    methods: {\r\n      async onSubmit() {\r\n        \r\n        // this.v$.$touch();\r\n        // const result = await this.v$.$validate();\r\n        // if (!result) {\r\n        //   this.isLoading = false;\r\n        //   return;\r\n        // }\r\n        try {\r\n          await APIService.post(\"VanBan/create\", this.post);\r\n          toast.success(\"Thêm văn bản thành công\", { theme: \"colored\", autoClose: 2000 });\r\n        } catch (e) {\r\n          this.submitted = false;\r\n          this.isLoading = false;\r\n          if (e.status == 401) {\r\n            toast.error(\"Bạn không có quyền truy cập.\", { theme: \"colored\", autoClose: 2000 });\r\n          } else {\r\n            if (e.data && e.data.Message) {\r\n              this.errMessage = e.data.Message;\r\n              toast.error(e.data.Message, { theme: \"colored\", autoClose: 2000 });\r\n            } else {\r\n              toast.error(\"Thêm mới văn bản thất bại. Vui lòng thử lại sau.\", { theme: \"colored\", autoClose: 2000 });\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    validations() {\r\n      return {\r\n        post: {\r\n          nameText: {\r\n            required: helpers.withMessage(\"Tên văn bản không được để trống\", required),\r\n          },\r\n          number: {\r\n            required: helpers.withMessage(\"Số hiệu không được để trống\", required),\r\n          },\r\n          effectiveDate: {\r\n            required: helpers.withMessage(\"Ngày có hiệu lực không được để trống\", required),\r\n          },\r\n          agencyIssued: {\r\n            required: helpers.withMessage(\"cơ quan ban hành không được để trống\", required),\r\n          },\r\n          publicDate: {\r\n            required: helpers.withMessage(\"vui lòng chọn ngày ban hành\", required),\r\n          },\r\n          status: {\r\n            required: helpers.withMessage(\"vui lòng chọn trạng thái\", required),\r\n          },\r\n          documentType:{\r\n            required: helpers.withMessage(\"vui lòng chọn loại tài liệu\", required),\r\n          },\r\n          Document:{\r\n            required: helpers.withMessage(\"không để trống tài liệu\", required),\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  </script>\r\n  \r\n  <style>\r\n  /* Thêm CSS tùy chỉnh của bạn ở đây */\r\n  </style>\r\n  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}