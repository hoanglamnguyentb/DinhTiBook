{"ast":null,"code":"import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createBlock as _createBlock, createVNode as _createVNode } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_a_select_option = _resolveComponent(\"a-select-option\");\n  const _component_a_select = _resolveComponent(\"a-select\");\n  const _component_a_form_item = _resolveComponent(\"a-form-item\");\n  const _component_a_input_number = _resolveComponent(\"a-input-number\");\n  const _component_a_input = _resolveComponent(\"a-input\");\n  const _component_a_textarea = _resolveComponent(\"a-textarea\");\n  const _component_a_form = _resolveComponent(\"a-form\");\n  const _component_a_modal = _resolveComponent(\"a-modal\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_createVNode(_component_a_modal, {\n    open: $data.open,\n    \"onUpdate:open\": _cache[5] || (_cache[5] = $event => $data.open = $event),\n    title: $data.id ? 'Cập nhật thông tin' : 'Thêm thông tin danh mục',\n    onOk: $options.handleOk,\n    onCancel: $options.closeModal,\n    \"confirm-loading\": $data.isLoading\n  }, {\n    default: _withCtx(() => [_createVNode(_component_a_form, {\n      ref: \"formRef\",\n      model: $data.thongTinDanhMuc,\n      rules: $data.rules,\n      layout: \"vertical\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_a_form_item, {\n        ref: \"ten\",\n        label: \"Tên danh mục\",\n        rules: $data.rules.selectedDanhMuc\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_select, {\n          style: {\n            \"width\": \"200px\"\n          },\n          value: $data.thongTinDanhMuc.maDanhMuc,\n          \"onUpdate:value\": _cache[0] || (_cache[0] = $event => $data.thongTinDanhMuc.maDanhMuc = $event),\n          autoClearSearchValue: \"true\",\n          onChange: $options.handleChangeSelect\n        }, {\n          default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.lstDanhMuc, item => {\n            return _openBlock(), _createBlock(_component_a_select_option, {\n              key: item.maDM,\n              value: item.maDM\n            }, {\n              default: _withCtx(() => [_createTextVNode(_toDisplayString(item.tenDanhMuc), 1 /* TEXT */)]),\n              _: 2 /* DYNAMIC */\n            }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"value\"]);\n          }), 128 /* KEYED_FRAGMENT */))]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"value\", \"onChange\"])]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"rules\"]), _createVNode(_component_a_form_item, {\n        ref: \"thutu\",\n        label: \"Thứ tự hiển thị\",\n        name: \"thuTuHienThi\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_input_number, {\n          value: $data.thongTinDanhMuc.thuTuHienThi,\n          \"onUpdate:value\": _cache[1] || (_cache[1] = $event => $data.thongTinDanhMuc.thuTuHienThi = $event)\n        }, null, 8 /* PROPS */, [\"value\"])]),\n        _: 1 /* STABLE */\n      }, 512 /* NEED_PATCH */), _createVNode(_component_a_form_item, {\n        ref: \"ma\",\n        label: \"Mã thông tin\",\n        name: \"maThongTin\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_input, {\n          value: $data.thongTinDanhMuc.maThongTin,\n          \"onUpdate:value\": _cache[2] || (_cache[2] = $event => $data.thongTinDanhMuc.maThongTin = $event)\n        }, null, 8 /* PROPS */, [\"value\"])]),\n        _: 1 /* STABLE */\n      }, 512 /* NEED_PATCH */), _createVNode(_component_a_form_item, {\n        ref: \"giaTri\",\n        label: \"Giá trị\",\n        name: \"giaTri\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_textarea, {\n          value: $data.thongTinDanhMuc.giaTri,\n          \"onUpdate:value\": _cache[3] || (_cache[3] = $event => $data.thongTinDanhMuc.giaTri = $event)\n        }, null, 8 /* PROPS */, [\"value\"])]),\n        _: 1 /* STABLE */\n      }, 512 /* NEED_PATCH */), _createVNode(_component_a_form_item, {\n        ref: \"ghiChu\",\n        label: \"Ghi chú\",\n        name: \"ghiChu\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_textarea, {\n          value: $data.thongTinDanhMuc.ghiChu,\n          \"onUpdate:value\": _cache[4] || (_cache[4] = $event => $data.thongTinDanhMuc.ghiChu = $event)\n        }, null, 8 /* PROPS */, [\"value\"])]),\n        _: 1 /* STABLE */\n      }, 512 /* NEED_PATCH */)]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"model\", \"rules\"])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"open\", \"title\", \"onOk\", \"onCancel\", \"confirm-loading\"])]);\n}","map":{"version":3,"names":["_createElementBlock","_createVNode","_component_a_modal","open","$data","$event","title","id","onOk","$options","handleOk","onCancel","closeModal","isLoading","_component_a_form","ref","model","thongTinDanhMuc","rules","layout","_component_a_form_item","label","selectedDanhMuc","_component_a_select","style","value","maDanhMuc","autoClearSearchValue","onChange","handleChangeSelect","_Fragment","_renderList","lstDanhMuc","item","_createBlock","_component_a_select_option","key","maDM","tenDanhMuc","name","_component_a_input_number","thuTuHienThi","_component_a_input","maThongTin","_component_a_textarea","giaTri","ghiChu"],"sources":["D:\\HINET_1\\BacKan\\client\\src\\views\\dashboard\\QL_ThongTinDanhMuc\\ModalAddEditTTDM.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <a-modal v-model:open=\"open\" :title=\"id ? 'Cập nhật thông tin' : 'Thêm thông tin danh mục'\" @ok=\"handleOk\"\r\n            @cancel=\"closeModal\" :confirm-loading=\"isLoading\">\r\n            <a-form ref=\"formRef\" :model=\"thongTinDanhMuc\" :rules=\"rules\" layout=\"vertical\">\r\n                <a-form-item ref=\"ten\"  label=\"Tên danh mục\" :rules=\"rules.selectedDanhMuc\">\r\n                    <a-select style=\"width: 200px;\" v-model:value=\"thongTinDanhMuc.maDanhMuc\" autoClearSearchValue=true @change=\"handleChangeSelect\">\r\n                        <a-select-option v-for=\"item in lstDanhMuc\" :key=\"item.maDM\" :value=\"item.maDM\">{{\r\n            item.tenDanhMuc }}</a-select-option>\r\n                    </a-select>\r\n                </a-form-item>\r\n                <a-form-item ref=\"thutu\" label=\"Thứ tự hiển thị\" name=\"thuTuHienThi\">\r\n                    <a-input-number v-model:value=\"thongTinDanhMuc.thuTuHienThi\" />\r\n                </a-form-item>\r\n                <a-form-item ref=\"ma\" label=\"Mã thông tin\" name=\"maThongTin\">\r\n                    <a-input v-model:value=\"thongTinDanhMuc.maThongTin\" />\r\n                </a-form-item>\r\n                <a-form-item ref=\"giaTri\" label=\"Giá trị\" name=\"giaTri\">\r\n                    <a-textarea v-model:value=\"thongTinDanhMuc.giaTri\" />\r\n                </a-form-item>\r\n                <a-form-item ref=\"ghiChu\" label=\"Ghi chú\" name=\"ghiChu\">\r\n                    <a-textarea v-model:value=\"thongTinDanhMuc.ghiChu\" />\r\n                </a-form-item>\r\n            </a-form>\r\n        </a-modal>\r\n    </div>\r\n</template>\r\n<script>\r\nimport APIService from \"@/helpers/ApiService\"\r\nimport ThongTinDanhMuc from \"./ThongTinDanhMuc.vue\";\r\n\r\nexport default {\r\n    created() {\r\n        this.getListDropdownDM()\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            lstDanhMuc: [],\r\n            selectedDanhMuc: null,\r\n            isLoading: false,\r\n            open: false,\r\n            labelCol: {\r\n                span: 6,\r\n            },\r\n            wrapperCol: {\r\n                span: 14,\r\n            },\r\n            id: undefined,\r\n            thongTinDanhMuc: {\r\n                maThongTin:'',\r\n                maDanhMuc: '',\r\n                tenDanhMuc: '',\r\n                thuTuHienThi: '',\r\n                giaTri: '',\r\n                ghiChu: '',\r\n                tepDinhKem: '',\r\n            },\r\n            rules: {\r\n                selectedDanhMuc: [\r\n\r\n                    { required: true, message: 'Vui lòng chọn một danh mục', trigger: 'change' },\r\n\r\n\r\n                ],\r\n                maThongTin: [\r\n                    {\r\n                        required: true,\r\n                        message: 'Mã thông tin danh mục là bắt buộc',\r\n                        trigger: 'change',\r\n                    },\r\n                    {\r\n                        min: 1,\r\n                        max: 20,\r\n                        message: 'Độ dài từ 3-20',\r\n                        trigger: 'blur',\r\n                    },\r\n                ],\r\n                thuTuHienThi: [\r\n\r\n                    {\r\n                        type: 'integer',\r\n                        message: 'Thứ tự hiển thị phải là một số nguyên',\r\n                        trigger: 'blur',\r\n                    }\r\n                ],\r\n                ghiChu: [\r\n                    { required: false }\r\n                ]\r\n\r\n            },\r\n        };\r\n    },\r\n    methods: {\r\n        async showModal(id) {\r\n            this.open = true\r\n            if (id) {\r\n                console.log(this.id)\r\n                var res = await APIService.get(`/ThongTinDanhMuc/${id}`)\r\n                this.id = id\r\n                console.log(this.id)\r\n                this.thongTinDanhMuc = res.data.data\r\n            }\r\n\r\n        },\r\n        closeModal() {\r\n            this.open = false\r\n            this.id = undefined\r\n            \r\n            this.resetForm()\r\n        },\r\n        handleChangeSelect(selectedValue) {\r\n            this.thongTinDanhMuc.maDanhMuc= selectedValue\r\n            \r\n        },\r\n        handleOk() {\r\n            this.$refs.formRef.validate().then(async () => {\r\n\r\n                var duplicateCategory = false\r\n                var duplicateOrder = false\r\n                if (this.id) {\r\n                    this.isLoading = true;\r\n                    var response = await APIService.put(`/ThongTinDanhMuc/edit/${this.id}`, this.thongTinDanhMuc)\r\n\r\n                    duplicateCategory = response.data.message == \"Mã bị trùng\" ? true : false;\r\n                    duplicateOrder = response.data.message == \"Thứ tự hiển thị bị trùng\" ? true : false;\r\n\r\n\r\n                } else {\r\n                    this.isLoading = true;\r\n                    var response = await APIService.post(\"/ThongTinDanhMuc/create\", this.thongTinDanhMuc)\r\n                    duplicateCategory = response.data.message == \"Mã bị trùng\" ? true : false;\r\n                    duplicateOrder = response.data.message == \"Thứ tự hiển thị bị trùng\" ? true : false;\r\n\r\n\r\n                }\r\n                if (duplicateCategory == false && duplicateOrder == false) {\r\n\r\n                    this.closeModal()\r\n                    this.$message.success(\"Thành công\")\r\n                    this.$emit('addSuccess')\r\n\r\n                } else if (duplicateCategory) {\r\n                    this.isLoading = false\r\n                    this.$message.error(\"Trùng mã thông tin danh mục\")\r\n                } else {\r\n                    this.isLoading = false\r\n                    this.$message.error(\"Trùng thứ tự hiển thị\")\r\n                }\r\n\r\n\r\n\r\n            }).catch(error => {\r\n                console.log('error', error);\r\n            }).finally(() => {\r\n                this.isLoading = false;\r\n            })\r\n        },\r\n        resetForm() {\r\n            this.$refs.formRef.resetFields();\r\n            this.thongTinDanhMuc= {\r\n                maThongTin:'',\r\n                maDanhMuc: '',\r\n                tenDanhMuc: '',\r\n                thuTuHienThi: '',\r\n                giaTri: '',\r\n                ghiChu: '',\r\n                tepDinhKem: '',\r\n            }\r\n        },\r\n        async getListDropdownDM() {\r\n            try {\r\n                // Gọi API để lấy danh sách các danh mục từ cơ sở dữ liệu\r\n                const response = (await APIService.get('/DanhMuc/GetDataByPage')).data;\r\n                this.lstDanhMuc = response.data.items\r\n\r\n            } catch (error) {\r\n                console.error('Error fetching categories:', error);\r\n            }\r\n        }\r\n    },\r\n\r\n}\r\n\r\n</script>"],"mappings":";;;;;;;;;;uBACIA,mBAAA,CAwBM,cAvBFC,YAAA,CAsBUC,kBAAA;IAtBOC,IAAI,EAAEC,KAAA,CAAAD,IAAI;yDAAJC,KAAA,CAAAD,IAAI,GAAAE,MAAA;IAAGC,KAAK,EAAEF,KAAA,CAAAG,EAAE;IAAsDC,IAAE,EAAEC,QAAA,CAAAC,QAAQ;IACpGC,QAAM,EAAEF,QAAA,CAAAG,UAAU;IAAG,iBAAe,EAAER,KAAA,CAAAS;;sBACvC,MAmBS,CAnBTZ,YAAA,CAmBSa,iBAAA;MAnBDC,GAAG,EAAC,SAAS;MAAEC,KAAK,EAAEZ,KAAA,CAAAa,eAAe;MAAGC,KAAK,EAAEd,KAAA,CAAAc,KAAK;MAAEC,MAAM,EAAC;;wBACjE,MAKc,CALdlB,YAAA,CAKcmB,sBAAA;QALDL,GAAG,EAAC,KAAK;QAAEM,KAAK,EAAC,cAAc;QAAEH,KAAK,EAAEd,KAAA,CAAAc,KAAK,CAACI;;0BACvD,MAGW,CAHXrB,YAAA,CAGWsB,mBAAA;UAHDC,KAAqB,EAArB;YAAA;UAAA,CAAqB;UAASC,KAAK,EAAErB,KAAA,CAAAa,eAAe,CAACS,SAAS;gEAAzBtB,KAAA,CAAAa,eAAe,CAACS,SAAS,GAAArB,MAAA;UAAEsB,oBAAoB,EAAC,MAAI;UAAEC,QAAM,EAAEnB,QAAA,CAAAoB;;4BACxF,MAA0B,E,kBAA3C7B,mBAAA,CACwB8B,SAAA,QAAAC,WAAA,CADQ3B,KAAA,CAAA4B,UAAU,EAAlBC,IAAI;iCAA5BC,YAAA,CACwBC,0BAAA;cADqBC,GAAG,EAAEH,IAAI,CAACI,IAAI;cAAGZ,KAAK,EAAEQ,IAAI,CAACI;;gCAAM,MAC1E,C,kCAAlBJ,IAAI,CAACK,UAAU,iB;;;;;;;oCAGXrC,YAAA,CAEcmB,sBAAA;QAFDL,GAAG,EAAC,OAAO;QAACM,KAAK,EAAC,iBAAiB;QAACkB,IAAI,EAAC;;0BAClD,MAA+D,CAA/DtC,YAAA,CAA+DuC,yBAAA;UAAvCf,KAAK,EAAErB,KAAA,CAAAa,eAAe,CAACwB,YAAY;gEAA5BrC,KAAA,CAAAa,eAAe,CAACwB,YAAY,GAAApC,MAAA;;;gCAE/DJ,YAAA,CAEcmB,sBAAA;QAFDL,GAAG,EAAC,IAAI;QAACM,KAAK,EAAC,cAAc;QAACkB,IAAI,EAAC;;0BAC5C,MAAsD,CAAtDtC,YAAA,CAAsDyC,kBAAA;UAArCjB,KAAK,EAAErB,KAAA,CAAAa,eAAe,CAAC0B,UAAU;gEAA1BvC,KAAA,CAAAa,eAAe,CAAC0B,UAAU,GAAAtC,MAAA;;;gCAEtDJ,YAAA,CAEcmB,sBAAA;QAFDL,GAAG,EAAC,QAAQ;QAACM,KAAK,EAAC,SAAS;QAACkB,IAAI,EAAC;;0BAC3C,MAAqD,CAArDtC,YAAA,CAAqD2C,qBAAA;UAAjCnB,KAAK,EAAErB,KAAA,CAAAa,eAAe,CAAC4B,MAAM;gEAAtBzC,KAAA,CAAAa,eAAe,CAAC4B,MAAM,GAAAxC,MAAA;;;gCAErDJ,YAAA,CAEcmB,sBAAA;QAFDL,GAAG,EAAC,QAAQ;QAACM,KAAK,EAAC,SAAS;QAACkB,IAAI,EAAC;;0BAC3C,MAAqD,CAArDtC,YAAA,CAAqD2C,qBAAA;UAAjCnB,KAAK,EAAErB,KAAA,CAAAa,eAAe,CAAC6B,MAAM;gEAAtB1C,KAAA,CAAAa,eAAe,CAAC6B,MAAM,GAAAzC,MAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}