{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"vstack gap-2\"\n};\nconst _hoisted_2 = {\n  class: \"d-flex align-items-center p-2\"\n};\nconst _hoisted_3 = {\n  class: \"flex-grow-1\"\n};\nconst _hoisted_4 = {\n  class: \"pt-1\"\n};\nconst _hoisted_5 = {\n  class: \"fs-14 mb-1\",\n  \"data-dz-name\": \"\"\n};\nconst _hoisted_6 = {\n  class: \"fs-13 text-muted mb-0\",\n  \"data-dz-size\": \"\"\n};\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"strong\", {\n  class: \"error text-danger\",\n  \"data-dz-errormessage\": \"\"\n}, null, -1 /* HOISTED */);\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"text-end\"\n}, [/*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\",\n  class: \"btn btn-primary\"\n}, \"Import\")], -1 /* HOISTED */);\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_PageHeader = _resolveComponent(\"PageHeader\");\n  const _component_DropZone = _resolveComponent(\"DropZone\");\n  const _component_b_card_body = _resolveComponent(\"b-card-body\");\n  const _component_Layout = _resolveComponent(\"Layout\");\n  return _openBlock(), _createBlock(_component_Layout, null, {\n    default: _withCtx(() => [_createVNode(_component_PageHeader, {\n      title: $data.title,\n      items: $data.items\n    }, null, 8 /* PROPS */, [\"title\", \"items\"]), _createElementVNode(\"form\", {\n      onSubmit: _cache[0] || (_cache[0] = _withModifiers((...args) => $options.OnSubmit && $options.OnSubmit(...args), [\"prevent\"])),\n      enctype: \"multipart/form-data\"\n    }, [_createCommentVNode(\" <div class=\\\"row mb-3\\\" v-for=\\\"(item, index) in configImport.value\\\" :key=\\\"index\\\">\\r\\n            <div class=\\\"col-lg-3\\\">\\r\\n                <label for=\\\"{{ item.nameprop }}\\\" class=\\\"form-label\\\">{{ item.displayname }}</label>\\r\\n            </div>\\r\\n            <div class=\\\"col-lg-9\\\">\\r\\n                <input type=\\\"text\\\" class=\\\"form-control\\\" :value=\\\"item.column\\\" id=\\\"nameInput\\\" placeholder=\\\"Chọn cột cấu hình\\\">\\r\\n            </div>\\r\\n        </div> \"), _createCommentVNode(\" <div class=\\\"row mb-3\\\">\\r\\n            <div class=\\\"col-lg-3\\\">\\r\\n                <label for=\\\"startRow\\\" class=\\\"form-label\\\">Dòng bắt đầu</label>\\r\\n            </div>\\r\\n            <div class=\\\"col-lg-3\\\">\\r\\n                <input type=\\\"number\\\" class=\\\"form-control\\\" id=\\\"startRow\\\" placeholder=\\\"Nhập dòng bắt đầu\\\">\\r\\n            </div>\\r\\n        </div> \"), _createVNode(_component_b_card_body, null, {\n      default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_DropZone, {\n        onDrop: _withModifiers($setup.drop, [\"prevent\"]),\n        onChange: $setup.selectedFile\n      }, null, 8 /* PROPS */, [\"onDrop\", \"onChange\"]), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.files, (file, index) => {\n        return _openBlock(), _createElementBlock(\"div\", {\n          class: \"border rounded\",\n          key: index\n        }, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"h5\", _hoisted_5, _toDisplayString(file.name), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_6, [_createElementVNode(\"strong\", null, _toDisplayString((file.size / 1024).toFixed()), 1 /* TEXT */), _createTextVNode(\" KB \")]), _hoisted_7])]), _createCommentVNode(\" <div class=\\\"flex-shrink-0 ms-3\\\">\\r\\n                      <b-button data-dz-remove=\\\"\\\" variant=\\\"danger\\\" size=\\\"sm\\\" @click=\\\"deleteRecord\\\">\\r\\n                        <i class=\\\"bx bx-trash\\\" />\\r\\n                      </b-button>\\r\\n                    </div> \")])]);\n      }), 128 /* KEYED_FRAGMENT */))])]),\n      _: 1 /* STABLE */\n    }), _hoisted_8], 32 /* NEED_HYDRATION */)]),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["class","_createElementVNode","type","_createBlock","_component_Layout","_createVNode","_component_PageHeader","title","$data","items","onSubmit","_cache","_withModifiers","args","$options","OnSubmit","enctype","_createCommentVNode","_component_b_card_body","_hoisted_1","_component_DropZone","onDrop","$setup","drop","onChange","selectedFile","_createElementBlock","_Fragment","_renderList","files","file","index","key","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_toDisplayString","name","_hoisted_6","size","toFixed","_hoisted_7","_hoisted_8"],"sources":["C:\\Users\\Admin\\Desktop\\DoAnClient\\client\\src\\views\\dashboard\\QL_TinTuc\\Import.vue"],"sourcesContent":["<script>\r\nimport { ref, watch } from 'vue';\r\nimport appConfig from \"../../../../app.config\"\r\nimport PageHeader from \"@/components/page-header\"\r\nimport Layout from \"../../../layouts/main.vue\";\r\nimport APIService from '../../../helpers/ApiService';\r\nimport DropZone from \"@/components/widgets/dropZone\";\r\nimport { toast } from 'vue3-toastify';\r\nimport 'vue3-toastify/dist/index.css';\r\n    export default {\r\n        page: {\r\n            title: \"Import tin tức\",\r\n            meta: [\r\n                {\r\n                    name: \"Import tin tức\",\r\n                    content: appConfig.description\r\n                }\r\n            ]\r\n        },\r\n        setup() {\r\n            let configImport = ref({})\r\n            let files = ref([]);\r\n            let dropzoneFile = ref(\"\");\r\n            const drop = (e) => {\r\n                dropzoneFile.value = e.dataTransfer.files[0];\r\n                files.value[0] = dropzoneFile.value;\r\n            };\r\n            const selectedFile = (e) => {\r\n                dropzoneFile.value = document.querySelector(\".dropzoneFile\").files[0];\r\n                files.value[0] = e.target.files[0];\r\n            };\r\n            watch(\r\n                () => [...files.value],\r\n                (currentValue) => {\r\n                    return currentValue;\r\n                }\r\n            );\r\n            return {\r\n                configImport,\r\n                drop,\r\n                selectedFile,\r\n                files\r\n            }\r\n        },\r\n        data() {\r\n            return {\r\n                title: \"Import tin tức\",\r\n                items: [{\r\n                    text: \"Tin tức\",\r\n                    href: \"/tin-tuc\",\r\n                },\r\n                {\r\n                    text: \"Import tin tức\",\r\n                    active: true,\r\n                },],\r\n            }\r\n        },\r\n        beforeMount() {\r\n            APIService.get('/tinh/import')\r\n            .then(rs => {\r\n                this.configImport.value = rs.data.data.config\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n            });\r\n        },\r\n        methods: {\r\n           \r\n            deleteRecord(ele) {\r\n                ele.target.parentElement.parentElement.parentElement.remove();\r\n            },\r\n            async OnSubmit() {\r\n                let formData = new FormData();\r\n                formData.append('fileImport', this.files[0]);\r\n                APIService.post('/TinTuc/importv1', formData)\r\n                    .then(response => {\r\n                        if(response.status == 200) {\r\n                            this.files.shift()\r\n\r\n                            toast.success(\"Import thành công\",{\r\n                                \"theme\": \"colored\",\r\n                                autoClose: 2000\r\n                            });\r\n                        } else {\r\n                            toast.error(\"Lỗi xử lý\",{\r\n                                \"theme\": \"colored\",\r\n                                autoClose: 2000\r\n                            });\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        toast.success(\"Có lỗi\" + error,{\r\n                                \"theme\": \"colored\",\r\n                                autoClose: 2000\r\n                        });\r\n                    });\r\n                \r\n            }\r\n        },\r\n        \r\n\r\n        components: {\r\n            PageHeader,\r\n            Layout,\r\n            DropZone,\r\n            \r\n        }\r\n    }\r\n</script>\r\n\r\n<template>\r\n   <Layout>\r\n    <PageHeader :title=\"title\" :items=\"items\" />\r\n    <form @submit.prevent=\"OnSubmit\" enctype=\"multipart/form-data\">\r\n        <!-- <div class=\"row mb-3\" v-for=\"(item, index) in configImport.value\" :key=\"index\">\r\n            <div class=\"col-lg-3\">\r\n                <label for=\"{{ item.nameprop }}\" class=\"form-label\">{{ item.displayname }}</label>\r\n            </div>\r\n            <div class=\"col-lg-9\">\r\n                <input type=\"text\" class=\"form-control\" :value=\"item.column\" id=\"nameInput\" placeholder=\"Chọn cột cấu hình\">\r\n            </div>\r\n        </div> -->\r\n\r\n        <!-- <div class=\"row mb-3\">\r\n            <div class=\"col-lg-3\">\r\n                <label for=\"startRow\" class=\"form-label\">Dòng bắt đầu</label>\r\n            </div>\r\n            <div class=\"col-lg-3\">\r\n                <input type=\"number\" class=\"form-control\" id=\"startRow\" placeholder=\"Nhập dòng bắt đầu\">\r\n            </div>\r\n        </div> -->\r\n        <b-card-body>\r\n              <div class=\"vstack gap-2\">\r\n                <DropZone @drop.prevent=\"drop\" @change=\"selectedFile\" />\r\n\r\n                <div class=\"border rounded\" v-for=\"(file, index) of files\" :key=\"index\">\r\n                  <div class=\"d-flex align-items-center p-2\">\r\n                    <div class=\"flex-grow-1\">\r\n                      <div class=\"pt-1\">\r\n                        <h5 class=\"fs-14 mb-1\" data-dz-name=\"\">\r\n                          {{ file.name }}\r\n                        </h5>\r\n                        <p class=\"fs-13 text-muted mb-0\" data-dz-size=\"\">\r\n                          <strong>{{ (file.size / 1024).toFixed() }}</strong> KB\r\n                        </p>\r\n                        <strong class=\"error text-danger\" data-dz-errormessage=\"\"></strong>\r\n                      </div>\r\n                    </div>\r\n                    <!-- <div class=\"flex-shrink-0 ms-3\">\r\n                      <b-button data-dz-remove=\"\" variant=\"danger\" size=\"sm\" @click=\"deleteRecord\">\r\n                        <i class=\"bx bx-trash\" />\r\n                      </b-button>\r\n                    </div> -->\r\n                  </div>\r\n                </div>\r\n\r\n              </div>\r\n            </b-card-body>\r\n            \r\n        <div class=\"text-end\">\r\n            <button type=\"submit\" class=\"btn btn-primary\">Import</button>\r\n        </div>\r\n    </form>\r\n  </Layout>\r\n</template>\r\n<style lang=\"scss\" scoped>\r\n\r\n</style>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":";;EAoImBA,KAAK,EAAC;AAAc;;EAIhBA,KAAK,EAAC;AAA+B;;EACnCA,KAAK,EAAC;AAAa;;EACjBA,KAAK,EAAC;AAAM;;EACXA,KAAK,EAAC,YAAY;EAAC,cAAY,EAAC;;;EAGjCA,KAAK,EAAC,uBAAuB;EAAC,cAAY,EAAC;;gCAG9CC,mBAAA,CAAmE;EAA3DD,KAAK,EAAC,mBAAmB;EAAC,sBAAoB,EAAC;;gCAcvEC,mBAAA,CAEM;EAFDD,KAAK,EAAC;AAAU,I,aACjBC,mBAAA,CAA6D;EAArDC,IAAI,EAAC,QAAQ;EAACF,KAAK,EAAC;GAAkB,QAAM,E;;;;;;uBAjD7DG,YAAA,CAoDQC,iBAAA;sBAnDP,MAA4C,CAA5CC,YAAA,CAA4CC,qBAAA;MAA/BC,KAAK,EAAEC,KAAA,CAAAD,KAAK;MAAGE,KAAK,EAAED,KAAA,CAAAC;iDACnCR,mBAAA,CAiDO;MAjDAS,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAAAC,cAAA,KAAAC,IAAA,KAAUC,QAAA,CAAAC,QAAA,IAAAD,QAAA,CAAAC,QAAA,IAAAF,IAAA,CAAQ;MAAEG,OAAO,EAAC;QACrCC,mBAAA,6dAOU,EAEVA,mBAAA,qXAOU,EACVZ,YAAA,CA0BkBa,sBAAA;wBAzBZ,MAwBM,CAxBNjB,mBAAA,CAwBM,OAxBNkB,UAwBM,GAvBJd,YAAA,CAAwDe,mBAAA;QAA7CC,MAAI,EAAAT,cAAA,CAAUU,MAAA,CAAAC,IAAI;QAAGC,QAAM,EAAEF,MAAA,CAAAG;0EAExCC,mBAAA,CAmBMC,SAAA,QAAAC,WAAA,CAnB8CN,MAAA,CAAAO,KAAK,GAArBC,IAAI,EAAEC,KAAK;6BAA/CL,mBAAA,CAmBM;UAnBD1B,KAAK,EAAC,gBAAgB;UAAiCgC,GAAG,EAAED;YAC/D9B,mBAAA,CAiBM,OAjBNgC,UAiBM,GAhBJhC,mBAAA,CAUM,OAVNiC,UAUM,GATJjC,mBAAA,CAQM,OARNkC,UAQM,GAPJlC,mBAAA,CAEK,MAFLmC,UAEK,EAAAC,gBAAA,CADAP,IAAI,CAACQ,IAAI,kBAEdrC,mBAAA,CAEI,KAFJsC,UAEI,GADFtC,mBAAA,CAAmD,gBAAAoC,gBAAA,EAAvCP,IAAI,CAACU,IAAI,SAASC,OAAO,oB,iBAAc,MACrD,E,GACAC,UAAmE,C,KAGvEzB,mBAAA,iRAIU,C;;;QAOtB0B,UAEM,C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}