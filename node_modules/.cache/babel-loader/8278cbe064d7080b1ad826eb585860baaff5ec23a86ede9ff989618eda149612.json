{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, createElementVNode as _createElementVNode, withKeys as _withKeys, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"ri-search-line search-icon\"\n}, null, -1 /* HOISTED */);\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"ri-equalizer-fill me-2 align-bottom\"\n}, null, -1 /* HOISTED */);\nconst _hoisted_3 = {\n  key: 0,\n  class: \"list-inline hstack gap-2 mb-0\"\n};\nconst _hoisted_4 = {\n  key: 1,\n  class: \"list-inline hstack gap-2 mb-0\"\n};\nconst _hoisted_5 = {\n  class: \"list-inline-item edit\",\n  \"data-bs-toggle\": \"tooltip\",\n  \"data-bs-trigger\": \"hover\",\n  \"data-bs-placement\": \"top\",\n  title: \"Chỉnh sửa\"\n};\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"ri-pencil-fill fs-16\"\n}, null, -1 /* HOISTED */);\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_PageHeader = _resolveComponent(\"PageHeader\");\n  const _component_a_button = _resolveComponent(\"a-button\");\n  const _component_router_link = _resolveComponent(\"router-link\");\n  const _component_a_input = _resolveComponent(\"a-input\");\n  const _component_a_col = _resolveComponent(\"a-col\");\n  const _component_a_row = _resolveComponent(\"a-row\");\n  const _component_b_link = _resolveComponent(\"b-link\");\n  const _component_a_table = _resolveComponent(\"a-table\");\n  const _component_Pagination = _resolveComponent(\"Pagination\");\n  const _component_a_card = _resolveComponent(\"a-card\");\n  const _component_ModalAddEditSanPham = _resolveComponent(\"ModalAddEditSanPham\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_PageHeader, {\n    title: $data.title,\n    items: $data.items\n  }, null, 8 /* PROPS */, [\"title\", \"items\"]), _createVNode(_component_a_row, null, {\n    default: _withCtx(() => [_createVNode(_component_a_col, {\n      span: 24\n    }, {\n      default: _withCtx(() => [_createVNode(_component_a_card, {\n        title: \"Danh sách nhà xuất bản\"\n      }, {\n        extra: _withCtx(() => [_createVNode(_component_router_link, {\n          to: {\n            name: 'QL_Create'\n          }\n        }, {\n          default: _withCtx(() => [_createVNode(_component_a_button, {\n            style: {\n              \"margin-left\": \"10px\"\n            }\n          }, {\n            default: _withCtx(() => [_createTextVNode(\"Thêm mới\")]),\n            _: 1 /* STABLE */\n          })]),\n          _: 1 /* STABLE */\n        })]),\n        default: _withCtx(() => [_createElementVNode(\"div\", null, [_createVNode(_component_a_row, {\n          style: {\n            \"margin-bottom\": \"20px\"\n          },\n          gutter: 24\n        }, {\n          default: _withCtx(() => [_createVNode(_component_a_col, {\n            span: 12\n          }, {\n            default: _withCtx(() => [_createVNode(_component_a_input, {\n              value: $data.formSearch.TenNXBFilter,\n              \"onUpdate:value\": _cache[0] || (_cache[0] = $event => $data.formSearch.TenNXBFilter = $event),\n              onKeyup: _withKeys($options.SearchData, [\"enter\"]),\n              placeholder: \"Tiêu đề\"\n            }, {\n              prefix: _withCtx(() => [_hoisted_1]),\n              _: 1 /* STABLE */\n            }, 8 /* PROPS */, [\"value\", \"onKeyup\"])]),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_a_col, {\n            span: 4\n          }, {\n            default: _withCtx(() => [_createVNode(_component_a_button, {\n              type: \"primary\",\n              onClick: $options.SearchData\n            }, {\n              default: _withCtx(() => [_hoisted_2, _createTextVNode(\"Tìm kiếm\")]),\n              _: 1 /* STABLE */\n            }, 8 /* PROPS */, [\"onClick\"])]),\n            _: 1 /* STABLE */\n          })]),\n          _: 1 /* STABLE */\n        }), _createElementVNode(\"div\", null, [_createVNode(_component_a_table, {\n          columns: $data.tableColumns,\n          dataSource: $data.lstSanPham,\n          pagination: false,\n          loading: _ctx.loading,\n          scroll: {\n            x: 2000\n          }\n        }, {\n          bodyCell: _withCtx(({\n            column,\n            index,\n            record\n          }) => [column.key === 'STT' ? (_openBlock(), _createElementBlock(\"ul\", _hoisted_3, [_createElementVNode(\"li\", null, _toDisplayString(index + 1), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), column.key === 'action' ? (_openBlock(), _createElementBlock(\"ul\", _hoisted_4, [_createElementVNode(\"li\", _hoisted_5, [_createVNode(_component_b_link, {\n            variant: \"text-primary\",\n            class: \"d-inline-block edit-item-btn\",\n            onClick: $event => $options.openModalEdit(record.id)\n          }, {\n            default: _withCtx(() => [_hoisted_6]),\n            _: 2 /* DYNAMIC */\n          }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])])])) : _createCommentVNode(\"v-if\", true)]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"columns\", \"dataSource\", \"loading\"]), _createVNode(_component_Pagination, {\n          total: $data.optionPage.totalCount,\n          current: $data.optionPage.pageIndex,\n          \"per-page\": $data.optionPage.pageSize,\n          pageRange: $data.optionPage.totalCount,\n          onPageChanged: $options.handlePageChange\n        }, null, 8 /* PROPS */, [\"total\", \"current\", \"per-page\", \"pageRange\", \"onPageChanged\"])])])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_ModalAddEditSanPham, {\n    onAddSuccess: _cache[1] || (_cache[1] = $event => $options.loadData($data.optionPage.pageIndex, $data.optionPage.pageSize)),\n    ref: \"modalAddEditSanPham\"\n  }, null, 512 /* NEED_PATCH */)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["_createElementVNode","class","title","_createVNode","_component_PageHeader","$data","items","_component_a_row","_component_a_col","span","_component_a_card","extra","_withCtx","_component_router_link","to","name","_component_a_button","style","gutter","_component_a_input","value","formSearch","TenNXBFilter","$event","onKeyup","_withKeys","$options","SearchData","placeholder","prefix","_hoisted_1","type","onClick","_hoisted_2","_component_a_table","columns","tableColumns","dataSource","lstSanPham","pagination","loading","_ctx","scroll","x","bodyCell","column","index","record","key","_createElementBlock","_hoisted_3","_toDisplayString","_hoisted_4","_hoisted_5","_component_b_link","variant","openModalEdit","id","_hoisted_6","_component_Pagination","total","optionPage","totalCount","current","pageIndex","pageSize","pageRange","onPageChanged","handlePageChange","_component_ModalAddEditSanPham","onAddSuccess","_cache","loadData","ref"],"sources":["D:\\DA\\DoAnClient\\client\\src\\views\\dashboard\\QL_SanPham\\SanPham.vue"],"sourcesContent":["<template>\r\n  <PageHeader :title=\"title\" :items=\"items\" />\r\n  <a-row>\r\n    <a-col :span=\"24\">\r\n      <a-card title=\"Danh sách nhà xuất bản\">\r\n        <template #extra>\r\n          <router-link :to=\"{ name: 'QL_Create'}\"> <a-button style=\"margin-left: 10px;\" >Thêm mới</a-button></router-link>\r\n        </template>\r\n        <div>\r\n          <a-row style=\"margin-bottom: 20px\" :gutter=\"24\">\r\n            <a-col :span=\"12\">\r\n              <a-input\r\n                v-model:value=\"formSearch.TenNXBFilter\"\r\n                @keyup.enter=\"SearchData\"\r\n                placeholder=\"Tiêu đề\"\r\n              >\r\n                <template #prefix>\r\n                  <i class=\"ri-search-line search-icon\"></i>\r\n                </template>\r\n              </a-input>\r\n            </a-col>\r\n            <a-col :span=\"4\">\r\n              <a-button type=\"primary\"  @click=\"SearchData\"><i class=\"ri-equalizer-fill me-2 align-bottom\"></i>Tìm kiếm</a-button>\r\n            </a-col>\r\n          </a-row>\r\n          <div>\r\n            <a-table\r\n              :columns=\"tableColumns\"\r\n              :dataSource=\"lstSanPham\"\r\n              :pagination=\"false\"\r\n              :loading=\"loading\"\r\n              :scroll=\"{ x: 2000 }\">\r\n              <template #bodyCell=\"{ column, index, record }\">\r\n                <template v-if=\"column.key === 'STT'\">\r\n                  <ul class=\"list-inline hstack gap-2 mb-0\">\r\n                    <li>{{ index+1 }}</li>\r\n                  </ul>\r\n                </template>\r\n                <template v-if=\"column.key === 'action'\">\r\n                  <ul class=\"list-inline hstack gap-2 mb-0\">\r\n                    <li\r\n                      class=\"list-inline-item edit\"\r\n                      data-bs-toggle=\"tooltip\"\r\n                      data-bs-trigger=\"hover\"\r\n                      data-bs-placement=\"top\"\r\n                      title=\"Chỉnh sửa\">\r\n                      <b-link\r\n                        variant=\"text-primary\"\r\n                        class=\"d-inline-block edit-item-btn\"\r\n                        @click=\"openModalEdit(record.id)\">\r\n                        <i class=\"ri-pencil-fill fs-16\"></i>\r\n                      </b-link>\r\n                    </li>\r\n                  </ul>\r\n                </template>\r\n              </template>\r\n            </a-table>\r\n            <Pagination :total=\"optionPage.totalCount\" :current=\"optionPage.pageIndex\" :per-page=\"optionPage.pageSize\"\r\n            :pageRange=\"optionPage.totalCount\" @page-changed=\"handlePageChange\" />\r\n          </div>\r\n        </div>\r\n      </a-card>    \r\n    </a-col>\r\n  </a-row>\r\n  <ModalAddEditSanPham\r\n    @addSuccess=\"loadData(optionPage.pageIndex, optionPage.pageSize)\"\r\n    ref=\"modalAddEditSanPham\">\r\n  </ModalAddEditSanPham>\r\n</template>\r\n\r\n<script>\r\nimport Pagination from \"../../../components/widgets/Pagination.vue\";\r\nimport PageHeader from \"@/components/page-header\";\r\nimport appConfig from \"../../../../app.config\";\r\nimport APIService from \"@/helpers/ApiService\";\r\nimport Swal from \"sweetalert2\";\r\nimport { toast } from \"vue3-toastify\";\r\nimport \"vue3-toastify/dist/index.css\";\r\nimport ModalAddEditSanPham from './ModalAddEditSanPham.vue';\r\nexport default {\r\n  components:{\r\n    PageHeader,\r\n    Pagination,\r\n    ModalAddEditSanPham\r\n  },\r\n  page: {\r\n    title: \"Quản lý sản phẩm\",\r\n    meta: [\r\n      {\r\n        name: \"Danh sách sản phẩm\",\r\n        content: appConfig.description,\r\n      },\r\n    ],\r\n  },\r\n  data() {\r\n    return {\r\n      title: \"Quản lý sản phẩm\",\r\n      items: [\r\n        {\r\n          text: \"Dashboard\",\r\n          href: \"/\",\r\n        },\r\n        {\r\n          text: \"Quản lý sản phẩm\",\r\n          active: true,\r\n        },\r\n      ],\r\n      tableColumns: [\r\n        { title: \"STT\", width: 100, key: \"STT\" },\r\n        { title: \"Tên sách\", dataIndex: \"tenSach\", width:300},\r\n        { title: \"Tên tác giả\", dataIndex: \"tenTacGia\", width:300 },\r\n        { title: \"Nhà xuất bản\",dataIndex: \"idNhaXuatBan\",  width:300 },\r\n        { title: \"Năm xuất bản\",dataIndex: \"namXuatBan\",  width:300},\r\n        { title: \"Danh mục\", dataIndex: \"idDanhMuc\",  width:300 },\r\n        { title: \"Giá tiền\", dataIndex: \"giaTien\",  width:300 },\r\n        { title: \"Số lượng tồn\", dataIndex: \"soLuongTon\",  width:300 },\r\n        { title: \"Mô tả\", dataIndex: \"moTaSach\" },\r\n        { title: \"Nhóm độ tuổi\", dataIndex: \"idNhomDoTuoi\" },\r\n        { title: \"Nổi bật\", dataIndex: \"noiBat\" },\r\n        { title: \"Giảm giá\", dataIndex: \"giamGia\" },\r\n\r\n      ],\r\n      pages: [],\r\n      lstSanPham: [],\r\n      optionPage: {\r\n        pageIndex: 1,\r\n        pageSize: 20,\r\n        totalCount: 0,\r\n      },\r\n      formSearch: {\r\n        TenNXBFilter: \"\",\r\n      },\r\n    }\r\n  },\r\n  methods: {\r\n    deletedata(event) {\r\n      Swal.fire({\r\n        title: \"Đồng ý xóa dữ liệu\",\r\n        text: \"Sau khi xóa sẽ không thể khôi phục lại.\",\r\n        icon: \"warning\",\r\n        showCancelButton: true,\r\n        cancelButtonText: \"Hủy\",\r\n        cancelButtonColor: \"#f46a6a\",\r\n        confirmButtonColor: \"#34c38f\",\r\n        confirmButtonText: \"Đồng ý\",\r\n      }).then(async (result) => {\r\n        if (result.value) {\r\n          try {\r\n            //xóa trên database\r\n            await APIService.delete(\"/NhaXuatBan/delete/\" + event.id);\r\n            toast.success(\"Xóa thành công.\", {\r\n              theme: \"colored\",\r\n              autoClose: 2000,\r\n            });\r\n\r\n            this.loadData(this.optionPage.pageIndex, this.optionPage.pageSize);\r\n          } catch (e) {\r\n            if (e.status == 401) {\r\n              toast.error(\"Bạn không có quyền truy cập.\", {\r\n                theme: \"colored\",\r\n                autoClose: 2000,\r\n              });\r\n            } else {\r\n              if (e.data && e.data.Message) {\r\n                this.errMessage = e.data.Message;\r\n                toast.error(e.data.Message, {\r\n                  theme: \"colored\",\r\n                  autoClose: 2000,\r\n                });\r\n              } else {\r\n                toast.error(\"Xóa thất bại. Vui lòng thử lại sau.\", {\r\n                  theme: \"colored\",\r\n                  autoClose: 2000,\r\n                });\r\n              }\r\n            }\r\n          }\r\n        }\r\n      });\r\n    },\r\n    SearchData() {\r\n      // this.value = this.value1;\r\n      var searchParam = {\r\n        pageIndex: this.optionPage.pageIndex,\r\n        pageSize: this.optionPage.pageSize,\r\n        TenNXBFilter: this.formSearch.TenNXBFilter,\r\n       \r\n      };\r\n\r\n      this.loadData(1, 10, searchParam);\r\n    },\r\n    handlePageChange(page) {\r\n      this.optionPage.pageIndex = page;\r\n      this.loadData(this.optionPage.pageIndex, this.optionPage.pageSize);\r\n    },\r\n    async loadData(pageIndex, pageSize, params) {\r\n      var searchParam = {\r\n        pageIndex: pageIndex,\r\n        pageSize: pageSize,\r\n      };\r\n      if (params) {\r\n        searchParam = params;\r\n      }\r\n\r\n      var urlQuery = new URLSearchParams(searchParam).toString();\r\n      var result = await APIService.get(\"/SanPham?\" + urlQuery);\r\n      this.lstSanPham = result.data.data.items;\r\n      if (result.data.data != null && result.data.data.items != null) {\r\n        var res = result.data.data;\r\n        this.lstSanPham = result.data.data.items;\r\n        this.optionPage.pageIndex = res.pageIndex;\r\n        this.optionPage.pageSize = res.pageSize;\r\n        this.optionPage.totalCount = res.totalCount;\r\n      }\r\n    },\r\n    openModalAdd() {\r\n      this.$refs.modalAddEditSanPham.showModal();\r\n    },\r\n    openModalEdit(id){\r\n      this.$refs.modalAddEditSanPham.showModal(id);\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadData(this.optionPage.pageIndex, this.optionPage.pageSize);\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}